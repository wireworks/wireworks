{"version":3,"sources":["app/pages/tools/layer-4/serverchat.tsx"],"names":["rootCases","connectedCases","push","from","flag","customLog","text","message","cases","ServerChat","state","history","currentChart","undefined","nextChart","selected","_this","i","length","line","setState","reset","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","ChatPanel","displayName","name","this","nextChartEvent","ConnectionLog","onClick","Component","props","_this2","Object","D_Henrique_Programming_Javascript_wireworks_github_io_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","D_Henrique_Programming_Javascript_wireworks_github_io_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_Henrique_Programming_Javascript_wireworks_github_io_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","panelRef","React","createRef","current","scrollBy","scrollHeight","_this3","messages","msg","key","options","_loop","caseI","ref","_this4","listRef","lis","lines","j"],"mappings":"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","file":"static/js/14.df1257c9.chunk.js","sourcesContent":["// ServerChat\r\n// +=========================+\r\n// Author: Henrique Colini\r\n// Version: 1.0 (2019-09-06)\r\n\r\nimport React, { Component, RefObject } from \"react\";\r\nimport \"src/sass/pages/serverchat.scss\";\r\n\r\ntype ChatMessage = { from: \"server\"|\"client\"; message: string };\r\n\r\ntype Flowchart = {\r\n\tflag: string,\r\n\tcustomLog?: {text: string, from?: \"server\"|\"client\"|\"any\"|\"other\"}[],\r\n\tmessage: string\r\n\tcases: Flowchart[],\r\n\tfrom: \"server\"|\"client\"|\"any\"\r\n}\r\n\r\nconst DUMMY_DATA_FLAG = \"@\";\r\nconst rootCases: Flowchart[] = []\r\nconst connectedCases: Flowchart[] = [];\r\n\r\nconnectedCases.push(\r\n\t{\r\n\t\tfrom: \"any\",\r\n\t\tflag: DUMMY_DATA_FLAG,\r\n\t\tcustomLog: [\r\n\t\t\t{ from: \"any\", text: \"ACK\" },\r\n\t\t\t{ text: \"...\" },\r\n\t\t\t{ from: \"other\", text: \"ACK\" }\r\n\t\t],\r\n\t\tmessage: \"Dados enviados! ðŸ“¤\",\r\n\t\tcases: connectedCases\r\n\t},\r\n\t{\r\n\t\tfrom: \"any\",\r\n\t\tflag: \"RST\",\r\n\t\tcustomLog: [\r\n\t\t\t{ from: \"any\", text: \"RST\" },\r\n\t\t\t{ text: \"-- ConexÃ£o Encerrada --\" }\r\n\t\t],\r\n\t\tmessage: \"Algo nÃ£o estÃ¡ certo na conexÃ£o. Teremos que recomeÃ§ar.\",\r\n\t\tcases: rootCases\r\n\t},\r\n\t{\r\n\t\tfrom: \"server\",\r\n\t\tflag: \"FIN ACK\",\r\n\t\tmessage: \"Ok, acho que terminamos por aqui.\",\r\n\t\tcases: [\r\n\t\t\t{\r\n\t\t\t\tfrom: \"client\",\r\n\t\t\t\tflag: \"ACK\",\r\n\t\t\t\tmessage: \"Entendido.\",\r\n\t\t\t\tcases: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfrom: \"client\",\r\n\t\t\t\t\t\tflag: \"FIN ACK\",\r\n\t\t\t\t\t\tmessage: \"Tchau, servidor.\",\r\n\t\t\t\t\t\tcases: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfrom: \"server\",\r\n\t\t\t\t\t\t\t\tflag: \"ACK\",\r\n\t\t\t\t\t\t\t\tmessage: \"Tchau, cliente.\",\r\n\t\t\t\t\t\t\t\tcustomLog: [\r\n\t\t\t\t\t\t\t\t\t{ from: \"server\", text: \"ACK\" },\r\n\t\t\t\t\t\t\t\t\t{ text: \"-- ConexÃ£o Encerrada --\" }\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\tcases: rootCases\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tfrom: \"client\",\r\n\t\tflag: \"FIN ACK\",\r\n\t\tmessage: \"Ok, acho que terminamos por aqui.\",\r\n\t\tcases: [\r\n\t\t\t{\r\n\t\t\t\tfrom: \"server\",\r\n\t\t\t\tflag: \"ACK\",\r\n\t\t\t\tmessage: \"Entendido.\",\r\n\t\t\t\tcases: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfrom: \"server\",\r\n\t\t\t\t\t\tflag: \"FIN ACK\",\r\n\t\t\t\t\t\tmessage: \"Tchau, cliente.\",\r\n\t\t\t\t\t\tcases: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfrom: \"client\",\r\n\t\t\t\t\t\t\t\tflag: \"ACK\",\r\n\t\t\t\t\t\t\t\tmessage: \"Tchau, servidor.\",\r\n\t\t\t\t\t\t\t\tcustomLog: [\r\n\t\t\t\t\t\t\t\t\t{ from: \"client\", text: \"ACK\" },\r\n\t\t\t\t\t\t\t\t\t{ text: \"-- ConexÃ£o Encerrada --\" }\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\tcases: rootCases\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n);\r\n\r\nrootCases.push(\r\n\t{\r\n\t\tfrom: \"client\",\r\n\t\tflag: \"SYN\",\r\n\t\tmessage: \"OlÃ¡ servidor! Podemos comeÃ§ar uma conexÃ£o?\",\r\n\t\tcases: [\r\n\t\t\t{\r\n\t\t\t\tfrom: \"server\",\r\n\t\t\t\tflag: \"SYN ACK\",\r\n\t\t\t\tmessage: \"Podemos sim!\",\r\n\t\t\t\tcases: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfrom: \"client\",\r\n\t\t\t\t\t\tflag: \"ACK\",\r\n\t\t\t\t\t\tcustomLog: [\r\n\t\t\t\t\t\t\t{ from: \"client\", text: \"ACK\" },\r\n\t\t\t\t\t\t\t{ text: \"-- ConexÃ£o Estabelecida --\" }\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tmessage: \"Entendi, conexÃ£o estabelecida.\",\r\n\t\t\t\t\t\tcases: connectedCases\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfrom: \"client\",\r\n\t\t\t\t\t\tflag: \"RST\",\r\n\t\t\t\t\t\tmessage: \"Opa, deu algo errado por aqui. Vou tentar do inÃ­cio.\",\r\n\t\t\t\t\t\tcases: rootCases\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tfrom: \"server\",\r\n\t\t\t\tflag: \"RST\",\r\n\t\t\t\tmessage: \"Calma, alguma coisa deu errada. Tente novamente.\",\r\n\t\t\t\tcases: rootCases\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tfrom: \"client\",\r\n\t\tflag: \"ACK\",\r\n\t\tmessage: \"OlÃ¡ servidor! ConexÃ£o estabelecida!\",\r\n\t\tcases: [\r\n\t\t\t{\r\n\t\t\t\tfrom: \"server\",\r\n\t\t\t\tflag: \"RST\",\r\n\t\t\t\tmessage: \"O quÃª? NÃ£o, isso estÃ¡ errado. Recomece.\",\r\n\t\t\t\tcases: rootCases\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n)\r\n\r\nclass ServerChat extends Component {\r\n\t\r\n\tstate = {\r\n\t\thistory: [] as Flowchart[],\r\n\t\tcurrentChart: {\r\n\t\t\tflag: undefined,\r\n\t\t\tmessage: undefined,\r\n\t\t\tfrom: undefined,\r\n\t\t\tcases: rootCases\r\n\t\t} as Flowchart\r\n\t};\r\n\r\n\tpublic nextChart = (selected: Flowchart, from: \"client\"|\"server\") => {\r\n\t\tlet history = this.state.history;\r\n\t\tlet customLog = undefined;\r\n\t\tif (selected.customLog) {\r\n\t\t\tcustomLog = [];\r\n\t\t\tfor (let i = 0; i < selected.customLog.length; i++) {\r\n\t\t\t\tconst line = selected.customLog[i];\r\n\t\t\t\tcustomLog[i] = {\r\n\t\t\t\t\ttext: line.text,\r\n\t\t\t\t\tfrom: line.from\r\n\t\t\t\t}\r\n\t\t\t\tif (line.from === \"any\") customLog[i].from = from;\r\n\t\t\t\tif (line.from === \"other\") customLog[i].from = from === \"client\" ? \"server\" : \"client\";\r\n\t\t\t}\r\n\t\t}\r\n\t\thistory.push({\r\n\t\t\tflag: selected.flag,\r\n\t\t\tcustomLog: customLog,\r\n\t\t\tmessage: selected.message,\r\n\t\t\tfrom: from,\r\n\t\t\tcases: []\r\n\t\t});\r\n\t\tthis.setState({ history: history, currentChart: selected });\t\t\r\n\t}\r\n\r\n\tpublic reset = () => {\r\n\t\tthis.setState({\r\n\t\t\thistory: [],\r\n\t\t\tcurrentChart: {\r\n\t\t\t\tflag: undefined,\r\n\t\t\t\tmessage: undefined,\r\n\t\t\t\tfrom: undefined,\r\n\t\t\t\tcases: rootCases\r\n\t\t\t} as Flowchart\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<main>\r\n\t\t\t\t<div className=\"hbox mb-3\">\r\n\t\t\t\t\t<ChatPanel\r\n\t\t\t\t\t\tdisplayName=\"Cliente\"\r\n\t\t\t\t\t\tname=\"client\"\r\n\t\t\t\t\t\thistory={this.state.history}\r\n\t\t\t\t\t\tcurrentChart={this.state.currentChart}\r\n\t\t\t\t\t\tnextChartEvent={this.nextChart}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ChatPanel\r\n\t\t\t\t\t\tdisplayName=\"Servidor\"\r\n\t\t\t\t\t\tname=\"server\"\r\n\t\t\t\t\t\thistory={this.state.history}\r\n\t\t\t\t\t\tcurrentChart={this.state.currentChart}\r\n\t\t\t\t\t\tnextChartEvent={this.nextChart}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ConnectionLog history={this.state.history}/>\r\n\t\t\t\t<button onClick={this.reset} className=\"mt-3\">Reiniciar simulaÃ§Ã£o</button>\r\n\t\t\t</main>\r\n\t\t);\r\n\t}\r\n}\r\n\r\ninterface ChatPanelProps {\r\n\tdisplayName: string;\r\n\tname: \"client\"|\"server\";\r\n\thistory: Flowchart[];\r\n\tcurrentChart: Flowchart,\r\n\tnextChartEvent: (selected: Flowchart, from: \"client\"|\"server\") => void\r\n}\r\n\r\nclass ChatPanel extends Component<ChatPanelProps> {\r\n\r\n\tprivate panelRef: RefObject<HTMLDivElement>;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.panelRef = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\t\r\n\t\tthis.panelRef.current.scrollBy(0, this.panelRef.current.scrollHeight);\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet messages = [];\r\n\r\n\t\tfor (let i = 0; i < this.props.history.length; i++) {\r\n\t\t\tconst msg = this.props.history[i];\r\n\t\t\tmessages[i] = (\r\n\t\t\t\t<div key={\"msg_\"+this.props.name+\"_\"+i} className={\"message-wrapper \" + ((msg.from === this.props.name) ? \"self\" : \"other\")}>\r\n\t\t\t\t\t<div className=\"message\">{msg.message}</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet options = [];\r\n\r\n\t\tfor (let i = 0; i < this.props.currentChart.cases.length; i++) {\r\n\t\t\tconst caseI = this.props.currentChart.cases[i];\r\n\t\t\tif (caseI.from === this.props.name || caseI.from === \"any\") {\r\n\t\t\t\toptions[i] = (\r\n\t\t\t\t\t<span key={\"caseI_\"+this.props.name+\"_\"+i} className=\"flag\" onClick={\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.props.nextChartEvent(caseI, this.props.name);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}>\r\n\t\t\t\t\t\t{caseI.flag === DUMMY_DATA_FLAG ? \"Enviar dados ðŸ“¦\" : caseI.flag }\t\r\n\t\t\t\t\t</span>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"chat-panel\">\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div className=\"subtitle\">VisÃ£o do</div>\r\n\t\t\t\t\t<div className=\"name\">{this.props.displayName}</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<div className=\"messages\" ref={this.panelRef} >{messages}</div>\r\n\t\t\t\t\t<div className=\"input\">{options}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\ninterface ConnectionLogProps {\r\n\thistory: Flowchart[];\r\n}\r\n\r\nclass ConnectionLog extends Component<ConnectionLogProps> {\r\n\r\n\tprivate listRef: RefObject<HTMLUListElement>;\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.listRef.current.scrollBy(0, this.listRef.current.scrollHeight);\r\n\t}\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.listRef = React.createRef();\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet lis = [];\r\n\r\n\t\tfor (let i = 0; i < this.props.history.length; i++) {\r\n\t\t\tconst msg = this.props.history[i];\r\n\t\t\tlet lines = [] as {from?: \"server\"|\"client\"|\"any\"|\"other\", text: string}[];\r\n\t\t\tif (msg.customLog) {\r\n\t\t\t\tlines = msg.customLog;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlines = [{\r\n\t\t\t\t\tfrom: msg.from === \"any\" ? undefined : msg.from,\r\n\t\t\t\t\ttext: msg.flag\r\n\t\t\t\t}];\r\n\t\t\t}\r\n\t\t\tfor (let j = 0; j < lines.length; j++) {\r\n\t\t\t\tconst line = lines[j];\r\n\t\t\t\tlis.push(\r\n\t\t\t\t\t<li key={\"li_\" + i + \"_\" + j}>\r\n\t\t\t\t\t\t{ line.from ? (line.from == \"client\" ? \"Cliente -> Servidor \" : \"Servidor -> Cliente \") : \"\"}\r\n\t\t\t\t\t\t{ line.from ? \"[\" + line.text + \"]\" : line.text }\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn <div className=\"log-wrapper\"><ul ref={this.listRef}>{lis}</ul></div>\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport default ServerChat;\r\n"],"sourceRoot":""}