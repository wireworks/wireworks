{"version":3,"sources":["app/wireworks/utils/math.ts","app/components/ErrorBox.tsx","app/wireworks/networking/layers/layer-5/domain.ts","app/components/FlowCanvas.tsx","app/wireworks/utils/canvas.ts","app/pages/tools/layer-5/dnsflow.tsx"],"names":["clamp","value","min","max","Math","binaryToDecimal","binary","reversed","arguments","length","undefined","decimal","realIndex","i","pow","decimalToBinary","RangeError","floor","tmpDecimal","reverse","__webpack_require__","d","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","ErrorBox","_ref","errorMessage","a","createElement","className","ERROR_INVALID_LABEL","ERROR_FULL_NAME_RANGE","ERROR_SMALL_DOMAIN","Domain","label","parent","address","Object","_home_void_Documents_wireworks_github_io_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","subdomains","setParent","setAddress","setLabel","getFullName","err","name","_home_void_Documents_wireworks_github_io_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","other","overrideAddresses","Error","concat","compare","sub","thisSub","getSubdomain","merge","push","toLowerCase","test","revalidateLabel","detach","splice","indexOf","getLabel","domainParts","split","error","fullStr","tldStr","destStr","interStr","unshift","middle","full","tld","dest","inter","admin","first","prefix","isTail","str","toString","getTreeStrRaw","root","fullName","parts","trim","curr","next","getSubdomains","Node","pos","width","heigth","margins","image","connectorOffset","classCallCheck","visible","height","createClass","ctx","drawImage","x","y","w2","h2","b","c","side","p","getVertices","fw","fh","t","l","r","Label","text","textColor","backgroundColor","padding","borderRadius","font","textHeight","textAlign","lineDistance","getRealWidth","getRealHeight","fillStyle","w","h","beginPath","moveTo","arcTo","closePath","roundRect","fill","lines","line","spacer","measureText","fillText","biggest","Line","from","to","time","strokeStyle","strokeWidth","lineWidth","offX","offY","abs","getOutput","getInput","fromPoint","getStartPoint","toPoint","getEndPoint","currEnd","getCurrentEndPoint","lineCap","lineTo","stroke","draw","FlowCanvas","props","_this","possibleConstructorReturn","getPrototypeOf","call","drawables","canvas","lineIntervals","addDrawable","drawable","removeDrawable","index","clearDrawables","getDrawables","stopLineAnimations","clearInterval","connectNodes","speed","labelText","callback","prevTime","Date","now","scope","assertThisInitialized","interval","setInterval","deltaTime","startPoint","endPoint","distance","sqrt","fixedDeltaTime","connectMultipleNodes","connections","iterativeConnect","connection","getAlignedPoint","positionY","positionX","fromWidth","fromHeight","toWidth","toHeight","current","getContext","clearRect","React","createRef","react_default","ref","Component","serverImage","Image","clientImage","e","then","bind","res","src","default","greenWire","redWire","blueWire","yellowWire","verySlowSpeed","slowSpeed","normalSpeed","fastSpeed","veryFastSpeed","ITERATIVE","RECURSIVE","DnsFlow","_home_void_Documents_wireworks_github_io_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_void_Documents_wireworks_github_io_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","txtDomain","dnsCanvas","selectSpeed","selectLocalMode","selectRootMode","selectTldMode","selectInterMode","state","domain","localMode","rootMode","tldMode","interMode","run","setState","errStr","tmpDomain","extractDomain","console","_this2","react__WEBPACK_IMPORTED_MODULE_5___default","htmlFor","type","onKeyDown","ev","placeholder","id","defaultValue","onClick","_components_ErrorBox__WEBPACK_IMPORTED_MODULE_7__","DnsFlowCanvas","_this3","flowCanvas","client","local","makerConfigs","drawIndex","cons","calculateConnections","success","onSuccess","onFailure","node","getDomainParts","makeConnection","mode","apply","kind","msg","style","resetCanvas","pt","onload","_components_FlowCanvas__WEBPACK_IMPORTED_MODULE_6__"],"mappings":"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","file":"static/js/8.3c208f6c.chunk.js","sourcesContent":["/**\n * Returns a value, clamped between max and min.\n * @param  {number} value The number to be clamped.\n * @param  {number} min The minimum possible number.\n * @param  {number} max The maximum possible number.\n */\nexport function clamp(value: number, min: number, max: number): number {\n\treturn Math.min(Math.max(value, min), max);\n};\n\n/**\n * Converts a binary number (as a string, boolean array, or number array) to a decimal number.\n * @param  {boolean[]} binary The number to be converted. An array of booleans, read from left to right (e.g. 001 equals 4).\n * @param  {boolean} reversed Optional. Whether the input should be reversed (read from right to left). Defaults to false.\n */\nexport function binaryToDecimal(binary: boolean[], reversed: boolean = false): number {\n\n\tif (binary.length === 0) {\n\t\treturn 0;\n\t}\n\n\tlet decimal = 0;\n\n\tfor (let realIndex = 0; realIndex < binary.length; realIndex++) {\n\n\t\tlet i = reversed ? binary.length - realIndex - 1 : realIndex;\n\n\t\tdecimal += binary[i] ? Math.pow(2, i) : 0;\n\t\t\n\t}\n\n\treturn decimal;\n\t\n}\n\n/**\n * Converts a decimal number (must be a positive integer) to an array of booleans (read from left to right, such that 001 equals 4).\n * @param  {number} decimal The number to be converted. Must be a positive integer.\n * @param  {boolean} reversed Optional. Whether the output should be reversed (read from right to left). Defaults to false.\n */\nexport function decimalToBinary(decimal: number, reversed: boolean = false): boolean[] {\n\n\tif (decimal < 0) {\n\t\tthrow new RangeError(\"Attempting to convert negative number to binary\");\n\t}\n\n\tif (decimal !== Math.floor(decimal)) {\n\t\tthrow new RangeError(\"Attempting to convert non-integer number to binary\");\n\t}\n\n\tlet binary: boolean[] = [];\n\n\tlet tmpDecimal = decimal, i = 0;\n\n\twhile (tmpDecimal > 0) {\n\n\t\tbinary[i] = tmpDecimal % 2 ? true : false;\n\t\ttmpDecimal = Math.floor(tmpDecimal / 2);\n\n\t\ti++;\n\n\t}\n\n\tif (reversed) {\n\t\tbinary.reverse();\n\t}\n\n\treturn binary;\n\n}","import React, { FC } from \"react\";\n\ninterface ErrorBoxProps {\n\terrorMessage: string\n}\n\nconst ErrorBox: FC<ErrorBoxProps> = ({errorMessage}) => {\n\n    if (errorMessage) {\n        return (\n            <div className=\"errorbox\">{errorMessage}</div>\n        );\n    }\n\n    return null;\n\n}\n\nexport default ErrorBox;","import { Address } from \"../layer-3/address\";\n\n/**\n * Error name for when a root Domain has a label that isn't \".\" or undefined.\n */\nexport const ERROR_INVALID_ROOT_LABEL = \"InvalidRootLabelError\";\n\n/**\n * Error name for when a Domain has an invalid label.\n */\nexport const ERROR_INVALID_LABEL = \"InvalidLabelError\";\n\n/**\n * Error name for when a Domain's full name is greater than 253.\n */\nexport const ERROR_FULL_NAME_RANGE = \"FullNameRangeError\";\n\n/**\n * Error name for when a root Domain has an Address.\n */\nexport const ERROR_ROOT_ADDRESS = \"RootAddressError\";\n\n/**\n * Error name for when a domain with same label but different address is found during merge.\n */\nexport const ERROR_MERGE_OVERLAP = \"MergeOverlapError\";\n\n/**\n * Error name for when two merging domains have different labels.\n */\nexport const ERROR_MERGE_WRONG_ROOT = \"MergeWrongRootError\";\n\n/**\n * Error name for when trying to get the parts of an incomplete domain.\n */\nexport const ERROR_SMALL_DOMAIN = \"SmallDomainError\"\n\n/**\n * A DNS domain tree.\n * @author Henrique Colini\n */\nexport class Domain {\n\t\n\t/**\n\t * The parent Domain. Undefined if this is a root domain.\n\t */\n\tprivate parent: Domain = undefined;\n\n\t/**\n\t * This Domain's subdomains.\n\t */\n\tprivate subdomains: Domain[] = [];\n\n\t/**\n\t * The IP address this Domain refers to. Undefined if this is not a hostname.\n\t */\n\tprivate address: Address = undefined;\n\n\t/**\n\t * This Domain's text label.\n\t */\n\tprivate label: string;\n\t\n\t/**\n\t * Constructs a Domain, provided its label, parent and optionally an Address.\n\t * @param  {string} label The label of this Domain. Must follow naming conventions.\n\t * @param  {Domain} parent The parent of this Domain. If undefined, this is a root domain.\n\t * @param  {Address} address The address of this Domain, if it's a hostname. Optional. Defaults to undefined. Must not exist if this is a root domain.\n\t */\n\tconstructor(label: string, parent: Domain, address: Address = undefined) {\n\n\t\tthis.setParent(parent, false);\n\t\tthis.setAddress(address);\n\t\tthis.setLabel(label);\n\n\t\tif (this.getFullName().length > 253) {\n\t\t\t\n\t\t\tlet err = new RangeError(\"The full name of a domain must not exceed 253 characters\");\n\t\t\terr.name = ERROR_FULL_NAME_RANGE;\n\t\t\tthrow err;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Extracts a Domain from a string, in the format abc.def.ghi. Returns the last subdomain.\n\t * @param  {Domain} root The root domain to be used.\n\t * @param  {string} fullName The full name of the domain, in the format abc.def.ghi.\n\t */\n\tpublic static extractDomain(root: Domain, fullName: string): Domain {\n\n\t\tlet parts = fullName.trim().split(\".\");\n\n\t\tlet curr: Domain = root;\n\n\t\tfor (let i = parts.length - 1; i >= 0; i--) {\n\n\t\t\tif (parts[i].length === 0) {\n\t\t\t\tlet err = new Error();\n\t\t\t\terr.name = ERROR_INVALID_LABEL;\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\tlet next = new Domain(parts[i], curr);\n\t\t\tcurr.getSubdomains().push(next);\n\t\t\tcurr = next;\n\n\t\t}\n\n\t\treturn curr;\n\n\t}\n\t\n\t/**\n\t * Merges two domains (combines their subdomains) given the original two have the same label. It has options for what to do when domains with the same labels and different addresses are found:\n\t * \"ignore\" - Nothing happens. The original address is kept. \n\t * \"override\" - The new address replaces the old one, no matter what. \n\t * \"merge\" - The new address replaces the old one only if the new one exists. \n\t * \"error\" - Throws an error when this happens. \n\t * @param  {Domain} other The domain to be merged with this. \n\t * @param  {string} overrideAddresses What to do when domains with the same labels and different addresses are found. May be \"ignore\", \"override\", \"merge\" or \"error\".\n\t */\n\tpublic merge(other: Domain, overrideAddresses: \"ignore\" | \"override\" | \"merge\" | \"error\" = \"ignore\"): void {\n\t\t\n\t\tif (other.label !== this.label) {\n\t\t\tlet err = new Error(`Attempting to merge domains with different roots (\"${this.label}\" != \"${other.label}\")`);\n\t\t\terr.name = ERROR_MERGE_WRONG_ROOT;\n\t\t\tthrow err;\n\t\t}\n\n\t\tif (this.address !== other.address && ((this.address && !this.address.compare(other.address)) || !other.address.compare(this.address))) {\n\t\t\t\n\t\t\tif (overrideAddresses === \"override\") {\n\t\t\t\tthis.address = other.address;\n\t\t\t}\n\n\t\t\tif (overrideAddresses === \"merge\") {\n\t\t\t\tif (other.address) {\n\t\t\t\t\tthis.address = other.address;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (overrideAddresses === \"error\") {\n\t\t\t\tlet err = new Error(\"Overlapping Domain addresses\");\n\t\t\t\terr.name = ERROR_MERGE_OVERLAP;\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t}\n\n\t\tfor (let i = 0; i < other.subdomains.length; i++) {\n\t\t\tconst sub = other.subdomains[i];\n\t\t\tconst thisSub = this.getSubdomain(sub.label);\n\t\t\t\n\t\t\tif (thisSub) {\n\t\t\t\tthisSub.merge(sub, overrideAddresses);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.subdomains.push(sub);\n\t\t\t\tsub.setParent(this);\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the label of this Domain.\n\t * @param  {string} label The label to be set. Must follow naming conventions. If empty, the parent should be undefined.\n\t */\n\tpublic setLabel(label: string): void {\n\n\t\tlabel = label.toLowerCase();\n\n\t\tif ((label === '.' || label === undefined || label === \"\") && !this.parent) {\n\t\t\tthis.label = '';\n\t\t}\n\t\telse if (!this.parent) {\n\t\t\tlet err = new Error(\"The root domain's label must be either \\\".\\\", \\\"\\\" or undefined\");\n\t\t\terr.name = ERROR_INVALID_ROOT_LABEL;\n\t\t\tthrow err;\n\t\t}\n\t\telse if ((label === '.' || label === undefined || label === \"\") && this.parent) {\n\t\t\tlet err = new Error(\"The domain's label must not be \\\".\\\", \\\"\\\" or undefined\");\n\t\t\terr.name = ERROR_INVALID_LABEL;\n\t\t\tthrow err;\n\t\t}\n\t\telse {\n\n\t\t\tconst basicReg = /^[a-zA-Z]$/;\n\t\t\tconst reg = /^[a-zA-Z][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]$/;\n\n\t\t\tif (!basicReg.test(label) && !reg.test(label)) {\n\n\t\t\t\tlet err = new Error(\"Domain label doesn't follow the naming standards\");\n\t\t\t\terr.name = ERROR_INVALID_LABEL;\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\tthis.label = label;\n\t\t\t\n\t\t}\n\t}\n\t\n\t/**\n\t * Sets the parent of this Domain.\n\t * @param  {Domain} parent The parent domain to be set. If undefined, the address must also be undefined.\n\t * @param  {boolean} revalidateLabel Optional. Whether the label should also be revalidated. Defaults to true.\n\t * @param  {boolean} detach Optional. Whether this should be removed from the old parent's subdomains list. Defaults to false.\n\t */\n\tpublic setParent(parent: Domain, revalidateLabel: boolean = true, detach: boolean = false): void {\n\t\t\n\t\tif (this.address && !parent) {\n\t\t\tlet err = new Error(\"The root domain must not have an Address.\");\n\t\t\terr.name = ERROR_ROOT_ADDRESS;\n\t\t\tthrow err;\n\t\t}\n\t\t\n\t\tif (detach) {\n\t\t\tthis.parent.subdomains.splice(this.parent.subdomains.indexOf(this), 1);\n\t\t}\n\n\t\tthis.parent = parent;\n\n\t\tif (revalidateLabel) {\n\t\t\tthis.setLabel(this.label);\n\t\t}\n\n\t}\n\t\t\n\t/**\n\t * Sets the address of this Domain, making it a hostname.\n\t * @param  {Address} address The address to be set. If the parent is undefined, this must be undefined as well.\n\t */\n\tpublic setAddress(address: Address): void {\n\t\tif (address && !this.parent) {\n\t\t\tlet err = new Error(\"The root domain must not have an Address.\");\n\t\t\terr.name = ERROR_ROOT_ADDRESS;\n\t\t\tthrow err;\n\t\t}\n\t\tthis.address = address;\n\t}\n\n\t/**\n\t * Sets this Domain's subdomains.\n\t */\n\tpublic setSubdomains(subdomains: Domain[]) {\n\t\tthis.subdomains = subdomains;\n\t}\n\n\t/**\n\t * Returns this Domain's label.\n\t */\n\tpublic getLabel(): string {\n\t\treturn this.label;\n\t}\n\n\t/**\n\t * Returns this Domain's parent domain.\n\t */\n\tpublic getParent(): Domain {\n\t\treturn this.parent;\n\t}\n\n\t/**\n\t * Returns this Domain's address if this is a hostname.\n\t */\n\tpublic getAddress(): Address {\n\t\treturn this.address;\n\t}\n\t\n\t/**\n\t * Returns this Domain's subdomains.\n\t */\n\tpublic getSubdomains(): Domain[] {\n\t\treturn this.subdomains;\n\t}\n\t\n\t/**\n\t * Returns a subdomain, given its label. If not found, returns undefined.\n\t * @param  {string} label The label of the Domain to be searched.\n\t */\n\tpublic getSubdomain(label: string): Domain {\n\t\t\n\t\tfor (let i = 0; i < this.subdomains.length; i++) {\n\t\t\tconst sub = this.subdomains[i];\n\t\t\tif (sub.label === label) {\n\t\t\t\treturn sub;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\t/**\n\t * Returns a string representation of this Domain. Similar to getLabel(), except it returns \".\" if this is a root domain.\n\t */\n\tpublic toString(): string {\n\t\tif (!this.parent) {\n\t\t\treturn \".\";\n\t\t}\n\t\treturn this.getLabel();\n\t}\n\n\t/**\n\t * Returns the full name of this Domain, recursively adding parents.\n\t */\n\tpublic getFullName(): string {\n\t\tif (!this.parent) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (!this.parent.parent) {\n\t\t\treturn this.label;\n\t\t}\n\t\treturn this.label + \".\" + this.parent.getFullName();\n\t}\n\t\n\t/**\n\t * Returns the parts of a complete domain (such as the full domain, top-level domain etc), as strings. Adds \"www\" if missing.\n\t */\n\tpublic getDomainParts(): { full: string, tld: string, dest: string, inter: string, admin: string } {\n\n\t\tlet domainParts = this.getFullName().split(\".\");\n\n\t\tif (domainParts.length < 2) {\n\t\t\tlet error = Error();\n\t\t\terror.name = ERROR_SMALL_DOMAIN;\n\t\t\tthrow error;\n\t\t}\n\n\t\tlet fullStr = \"\";\n\t\tlet tldStr = domainParts[domainParts.length - 1];\n\t\tlet destStr = domainParts[0];\n\t\tlet interStr = \"\";\n\t\tlet adminStr = \"\";\n\n\t\tif (domainParts.length === 2 || destStr !== \"www\") {\n\t\t\tdomainParts.unshift(\"www\");\n\t\t\tdestStr = \"www\";\n\t\t}\n\t\t\n\t\tif (domainParts.length > 3) {\n\t\t\tlet middle = \"\";\n\t\t\tfor (let i = 2; i < domainParts.length - 1; i++) middle += domainParts[i] + ((i < domainParts.length - 2) ? \".\" : \"\");\n\t\t\tdomainParts = [domainParts[0], domainParts[1], middle, domainParts[domainParts.length - 1]];\n\t\t\tinterStr = middle;\n\t\t}\n\n\t\tfor (let i = 0; i < domainParts.length; i++) fullStr += domainParts[i] + ((i < domainParts.length - 1) ? \".\" : \"\");\n\t\tadminStr = domainParts[1];\n\n\t\treturn { full: fullStr, tld: tldStr, dest: destStr, inter: interStr, admin: adminStr };\n\n\t}\n\n\t/**\n\t * Returns a neatly formatted string showing the whole tree. Raw method.\n\t * @param  {boolean} first Whether this is the root of the tree.\n\t * @param  {string} prefix The prefix of this line of the tree.\n\t * @param  {boolean} isTail Whether this line is the tail of the tree.\n\t */\n\tprivate getTreeStrRaw(first: boolean, prefix: string, isTail: boolean): string {\n\n\t\tlet str = (first ? \"\" : (prefix + (isTail ? \"└── \" : \"├── \"))) + this.toString() + (this.address ? ` <${this.address.toString(true)}>` : \"\") + \"\\n\";\n\t\n\t\tfor (let i = 0; i < this.subdomains.length - 1; i++) {\n\t\t\tstr += this.subdomains[i].getTreeStrRaw(false, (first ? \"\" : (prefix + (isTail ? \"    \" : \"│   \"))), false);\n\t\t}\n\n\t\tif (this.subdomains.length > 0) {\n\t\t\tstr += this.subdomains[this.subdomains.length - 1].getTreeStrRaw(false, (first ? \"\" : (prefix + (isTail ? \"    \" : \"│   \"))), true);\n\t\t}\n\n\t\treturn str;\n\n\t}\n\n\t/**\n\t * Returns a neatly formatted string showing the whole tree.\n\t */\n\tpublic getTreeStr(): string {\n\t\treturn this.getTreeStrRaw(true, \"\", true);\n\t}\n\n}","import React, { Component, RefObject } from \"react\";\nimport { clamp } from \"../wireworks/utils/math\";\nimport { roundRect } from \"../wireworks/utils/canvas\";\n\n/**\n * A 2D point.\n */\nexport type Point = { x: number, y: number }\n\n/**\n * Interface representing anything that can be drawn on the canvas.\n */\nexport interface Drawable {\n\n\tvisible: boolean;\n\tdraw(ctx: CanvasRenderingContext2D): void;\n\n}\n\n/**\n * A Drawable image that has special connecting points. Used to represent servers and clients in the canvas.\n */\nexport class Node implements Drawable {\n\t\n\tpublic visible = true;\n\tpublic pos: Point;\n\tpublic margins: { l: number, t: number, r: number, b: number };\n\tpublic width: number;\n\tpublic height: number;\n\tpublic image: HTMLImageElement;\n\tpublic connectorOffset: number;\n\n\tconstructor(pos: Point, width: number, heigth: number, margins: { l: number, t: number, r: number, b: number }, image: HTMLImageElement, connectorOffset: number = 0.25) {\n\t\tthis.pos = pos;\n\t\tthis.width = width;\n\t\tthis.height = heigth;\n\t\tthis.image = image;\n\t\tthis.margins = margins;\n\t\tthis.connectorOffset = connectorOffset;\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D): void {\n\t\t\n\t\tif (this.visible)\n\t\t\tctx.drawImage(this.image, this.pos.x - (this.width / 2), this.pos.y - (this.height / 2), this.width, this.height);\n\n\t}\n\n\t/**\n\t * Returns the 4 vertices of this rectangular Node. A, B, C and D represent the vertices clockwise, starting from the top left corner.\n\t */\n\tpublic getVertices(): {a: Point, b: Point, c: Point, d: Point} {\n\n\t\tlet x = this.pos.x;\n\t\tlet y = this.pos.y;\n\t\tlet w2 = this.width / 2;\n\t\tlet h2 = this.height / 2;\n\n\t\tlet a = { x: x - w2, y: y - h2 };\n\t\tlet b = { x: x + w2, y: y - h2 };\n\t\tlet c = { x: x + w2, y: y + h2 };\n\t\tlet d = { x: x - w2, y: y + h2 };\n\n\t\treturn {a,b,c,d};\n\n\t}\n\n\t/**\n\t * Returns an exit point of this Node, given the side.\n\t * @param side Which side to get the point from.\n\t */\n\tpublic getOutput(side: \"top\" | \"bottom\" | \"left\" | \"right\"): Point {\n\n\t\tlet p = this.getVertices();\n\t\tlet fw = this.connectorOffset * this.width;\n\t\tlet fh = this.connectorOffset * this.height;\n\n\t\tswitch (side) {\n\n\t\t\tcase \"top\":\n\t\t\t\treturn { x: p.a.x + fw, y: p.a.y - this.margins.t };\n\t\t\tcase \"bottom\":\n\t\t\t\treturn { x: p.c.x - fw, y: p.c.y + this.margins.b };\n\t\t\tcase \"left\":\n\t\t\t\treturn { x: p.d.x - this.margins.l, y: p.d.y - fh };\n\t\t\tcase \"right\":\n\t\t\t\treturn { x: p.c.x + this.margins.r, y: p.b.y + fh };\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns an entry point of this Node, given the side.\n\t * @param side Which side to get the point from.\n\t */\n\tpublic getInput(side: \"top\" | \"bottom\" | \"left\" | \"right\"): Point {\n\n\t\tlet p = this.getVertices();\n\t\tlet fw = this.connectorOffset * this.width;\n\t\tlet fh = this.connectorOffset * this.height;\n\n\t\tswitch (side) {\n\n\t\t\tcase \"top\":\n\t\t\t\treturn { x: p.b.x - fw, y: p.a.y - this.margins.t };\n\t\t\tcase \"bottom\":\n\t\t\t\treturn { x: p.d.x + fw, y: p.c.y + this.margins.b };\n\t\t\tcase \"left\":\n\t\t\t\treturn { x: p.d.x - this.margins.l, y: p.a.y + fh };\n\t\t\tcase \"right\":\n\t\t\t\treturn { x: p.c.x + this.margins.r, y: p.c.y - fh };\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * A Drawable text box.\n */\nexport class Label implements Drawable {\n\t\n\tpublic visible = true;\n\tpublic pos: Point;\n\tpublic text: string;\n\tpublic textColor: string;\n\tpublic backgroundColor: string;\n\tpublic padding: number;\n\tpublic borderRadius: number;\n\tpublic font: string;\n\tpublic textHeight: number;\n\tpublic lineDistance: number;\n\tpublic textAlign: \"left\"|\"center\"|\"right\";\n\n\tconstructor(pos: Point, text: string, textColor: string, backgroundColor: string, padding: number, borderRadius: number, font: string, textHeight: number, textAlign:\"left\"|\"center\"|\"right\" = \"left\", lineDistance: number = 3) {\n\t\tthis.pos = pos;\n\t\tthis.text = text;\n\t\tthis.textColor = textColor;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.padding = padding;\n\t\tthis.borderRadius = borderRadius;\n\t\tthis.font = font;\n\t\tthis.textHeight = textHeight;\n\t\tthis.lineDistance = lineDistance;\n\t\tthis.textAlign = textAlign;\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D): void {\n\t\t\n\t\tif (this.visible) {\n\t\t\tlet width = this.getRealWidth(ctx);\n\t\t\tlet height = this.getRealHeight();\n\n\t\t\tctx.fillStyle = this.backgroundColor;\n\t\t\troundRect(ctx, this.pos.x - (width / 2), this.pos.y - (height / 2), width, height, this.borderRadius).fill();\n\n\t\t\tctx.fillStyle = this.textColor;\n\t\t\tctx.font = this.font;\n\n\t\t\tlet lines = this.text.split(\"\\n\");\n\t\t\t\n\t\t\tfor (let i = 0; i < lines.length; i++) {\n\t\t\t\tconst line = lines[i];\n\t\t\t\tconst lineWidth = ctx.measureText(line).width + (2*this.padding);\n\t\t\t\tlet spacer = width-lineWidth;\n\n\t\t\t\tswitch (this.textAlign) {\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase \"left\":\n\t\t\t\t\t\tspacer = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\tspacer /= 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tctx.fillText(line, this.pos.x + this.padding - (width / 2) + spacer, this.pos.y + this.padding + ((i+1)*this.textHeight) + ((i)*this.lineDistance) - (height / 2));\n\t\t\t}\n\t\t}\n\t}\t\n\t\n\t/**\n\t * Returns the width of this Label, considering the width of the text and the padding.\n\t */\n\tpublic getRealWidth(ctx: CanvasRenderingContext2D): number {\n\t\t\n\t\tlet biggest = 0;\n\t\tctx.font = this.font;\n\n\t\tlet lines = this.text.split('\\n');\n\t\t\n\t\tfor (let i = 0; i < lines.length; i++) {\n\t\t\tconst line = lines[i];\n\t\t\tlet w = ctx.measureText(line).width + (2*this.padding);\n\t\t\tif (w > biggest) biggest = w;\n\t\t}\n\n\t\treturn biggest;\n\t}\n\n\t/**\n\t * Returns the height of this Label, considering the height of the text and the padding.\n\t */\n\tpublic getRealHeight(): number {\n\t\t// return this.textHeight + (2*this.padding);\n\t\tlet lines = this.text.split('\\n').length;\n\t\treturn (lines * this.textHeight) + ((lines-1) * this.lineDistance) + (2*this.padding);\n\t}\n\n}\n\n/**\n * A Drawable line that connects the outputs and inputs of Nodes.\n */\nexport class Line implements Drawable {\n\n\tpublic visible = true;\n\tpublic from: Node;\n\tpublic to: Node;\n\tpublic time: number;\n\tpublic strokeStyle: string;\n\tpublic lineWidth: number;\n\tpublic label: Label;\n\n\tconstructor(from: Node, to: Node, time: number, strokeStyle: string, strokeWidth: number) {\n\n\t\tthis.from = from;\n\t\tthis.to = to;\n\t\tthis.time = time;\n\t\tthis.strokeStyle = strokeStyle;\n\t\tthis.lineWidth = strokeWidth;\n\n\t}\n\n\t/**\n\t * Returns the start point of this Line.\n\t */\n\tpublic getStartPoint(): Point {\n\n\t\tlet offX = this.from.pos.x - this.to.pos.x;\n\t\tlet offY = this.from.pos.y - this.to.pos.y;\n\n\t\tif (Math.abs(offX) > Math.abs(offY)) {\n\t\t\tif (offX > 0) {\n\t\t\t\treturn this.from.getOutput(\"left\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.from.getOutput(\"right\");\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (offY > 0) {\n\t\t\t\treturn this.from.getOutput(\"top\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.from.getOutput(\"bottom\");\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the end point of this Line.\n\t */\n\tpublic getEndPoint(): Point {\n\n\t\tlet offX = this.from.pos.x - this.to.pos.x;\n\t\tlet offY = this.from.pos.y - this.to.pos.y;\n\n\t\tif (Math.abs(offX) > Math.abs(offY)) {\n\t\t\tif (offX > 0) {\n\t\t\t\treturn this.to.getInput(\"right\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.to.getInput(\"left\");\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (offY > 0) {\n\t\t\t\treturn this.to.getInput(\"bottom\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.to.getInput(\"top\");\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the current end point of this Line in a point of time.\n\t * @param fromPoint The starting point.\n\t * @param toPoint The end point to be reached.\n\t */\n\tpublic getCurrentEndPoint(fromPoint = this.getStartPoint(), toPoint = this.getEndPoint()): Point {\n\t\treturn {x: fromPoint.x + (this.time * (toPoint.x - fromPoint.x)), y: fromPoint.y + (this.time * (toPoint.y - fromPoint.y))};\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D): void {\n\n\t\tif (this.visible){\n\n\t\t\tlet fromPoint = this.getStartPoint();\n\t\t\tlet currEnd = this.getCurrentEndPoint(fromPoint);\n\n\t\t\tctx.beginPath();\n\t\t\tctx.strokeStyle = this.strokeStyle;\n\t\t\tctx.lineWidth = this.lineWidth;\n\t\t\tctx.lineCap = \"round\";\n\n\t\t\tctx.moveTo(fromPoint.x, fromPoint.y);\n\t\t\tctx.lineTo(currEnd.x, currEnd.y);\n\t\t\tctx.stroke();\n\n\t\t\tif (this.label) {\t\t\t\t\t\t\t\t\n\t\t\t\tthis.label.pos = currEnd;\n\t\t\t\tthis.label.draw(ctx);\n\t\t\t}\n\t\t}\n\n\t}\n\n}\n\n/**\n * A helper data structure used to represent the connection between two Nodes when creating a line. \n */\nexport type NodeConnection = {\n\tfrom: Node, \n\tto: Node, \n\tstrokeStyle: string, \n\tlineWidth: number, \n\tspeed: number, \n\tlabelText: string | undefined \n};\n\nexport interface FlowCanvasProps {\n\twidth: number,\n\theight: number,\n\tfixedDeltaTime: number\n};\n\nclass FlowCanvas extends Component<FlowCanvasProps> {\n\n\t/**\n\t * The list of elements drawn to the canvas.\n\t */\n\tprivate drawables: Drawable[] = [];\n\n\t/**\n\t * The reference to the canvas.\n\t */\n\tprotected canvas: RefObject<HTMLCanvasElement>;\t\t\n\t\n\t/**\n\t * The intervals of each line being drawn.\n\t */\n\tprotected lineIntervals: NodeJS.Timeout[] = [];\n\n\t/**\n\t * Adds a drawable to this FlowCanvas.\n\t * @param drawable The drawable to be added.\n\t */\n\tpublic addDrawable = (drawable: Drawable) => {\n\t\tthis.drawables.push(drawable);\n\t}\n\n\t/**\n\t * Removes a drawable from this FlowCanvas.\n\t * @param drawable The drawable to be removed.\n\t */\n\tpublic removeDrawable = (drawable: Drawable): boolean => {\n\t\tlet index = this.drawables.indexOf(drawable);\t\t\n\t\tif (index < 0) return false;\n\t\tthis.drawables.splice(index, 1);\n\t\treturn true;\n\t}\n\n\t/**\n\t * Removes all drawables from this FlowCanvas.\n\t */\n\tpublic clearDrawables = () => {\n\t\tthis.drawables = [];\n\t}\n\n\t/**\n\t * Returns the list of drawables of this FlowCanvas.\n\t */\n\tpublic getDrawables = (): Drawable[] => {\n\t\treturn this.drawables;\n\t}\n\n\t/**\n\t * Stops all line animations.\n\t */\n\tpublic stopLineAnimations = () => {\n\t\tfor (let i = 0; i < this.lineIntervals.length; i++) {\n\t\t\tclearInterval(this.lineIntervals[i]);\n\t\t}\n\t}\n\n\t/**\n\t * Connects two Nodes with a Line, drawing it over time, given a speed. \n\t * @param from The Node to start the Line from.\n\t * @param to The Node to get the Line to.\n\t * @param strokeStyle The stroke style of the Line.\n\t * @param lineWidth The line width.\n\t * @param speed The speed of the Line being drawn, in pixels per second.\n\t * @param labelText The text of the Line's label.\n\t * @param callback A callback for when the Line finishes drawing.\n\t */\n\tpublic connectNodes = (from: Node, to: Node, strokeStyle: string, lineWidth: number, speed: number, labelText: string|undefined, callback: Function = undefined): Line => {\n\n\t\tlet line = new Line(from, to, 0, strokeStyle, lineWidth);\n\n\t\tif (labelText) {\n\t\t\tline.label = new Label({x:0,y:0}, labelText, \"#000000\", strokeStyle, 5, 10, \"12px Monserrat, sans-serif\", 10);\n\t\t}\n\t\tthis.addDrawable(line);\n\n\t\tlet prevTime = Date.now();\n\t\tlet scope: FlowCanvas = this;\n\n\t\tlet interval = setInterval(function(){\n\n\t\t\tlet deltaTime = Date.now() - prevTime;\n\t\t\tprevTime = Date.now();\n\n\t\t\tlet startPoint = line.getStartPoint();\n\t\t\tlet endPoint = line.getEndPoint();\n\n\t\t\tlet distance = Math.sqrt(\n\t\t\t\t((startPoint.x - endPoint.x)*(startPoint.x - endPoint.x)) + ((startPoint.y - endPoint.y)*(startPoint.y - endPoint.y))\n\t\t\t);\n\n\t\t\tline.time = clamp(line.time + ((deltaTime/1000) * (speed/distance)), 0, 1);\n\n\t\t\tscope.draw();\n\t\t\t\n\t\t\tif (line.time >= 1) {\n\n\t\t\t\tline.time = 1;\n\n\t\t\t\tline.label = undefined;\n\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\n\t\t\t\tclearInterval(interval);\n\t\t\t\t\n\t\t\t\tscope.draw();\n\t\t\t}\n\n\t\t}, this.props.fixedDeltaTime);\n\n\t\tthis.lineIntervals.push(interval);\n\n\t\treturn line;\n\n\t}\n\n\t/**\n\t * Connects multiple nodes, in succession.\n\t * @param connections The list of connections to be made.\n\t * @param callback What do to when the last line finishes being drawn.\n\t */\n\tpublic connectMultipleNodes = (connections: NodeConnection[], callback: Function = undefined) => {\n\n\t\tlet iterativeConnect = (index: number) => {\n\n\t\t\tif(index < connections.length){\n\t\t\t\tlet connection = connections[index];\n\t\t\t\tindex++;\n\t\t\t\t\t\t\n\t\t\t\tthis.connectNodes(connection.from, connection.to, connection.strokeStyle, connection.lineWidth, connection.speed, connection.labelText, function () {\n\t\t\t\t\titerativeConnect(index);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\titerativeConnect(0);\n\n\t}\n\n\t/**\n\t * Returns the position of a Node or Label when put aligned to another one.\n\t * @param from The Node or Label to be positioned relative to.\n\t * @param to The Node or Label to be positioned.\n\t * @param positionY How to align the Node or Label vertically. Can be \"top\", \"center\" or \"bottom\".\n\t * @param positionX How to align the Node or Label horizontally. Can be \"left\", \"center\" or \"right\".\n\t */\n\tpublic getAlignedPoint = (from: Node|Label, to: Node|Label, positionY: \"top\"|\"center\"|\"bottom\", positionX: \"left\"|\"center\"|\"right\"): Point => {\n\n\t\tlet offX: number;\t\n\t\tlet offY: number;\t\n\n\t\tswitch (positionX) {\n\t\t\tcase \"left\": offX = -0.5; break;\n\t\t\tcase \"center\": offX = 0; break;\n\t\t\tcase \"right\": offX = 0.5; break;\n\t\t}\n\n\t\tswitch (positionY) {\n\t\t\tcase \"top\": offY = -0.5; break;\n\t\t\tcase \"center\": offY = 0; break;\n\t\t\tcase \"bottom\": offY = 0.5; break;\n\t\t}\n\n\t\tlet fromWidth: number;\n\t\tlet fromHeight: number;\n\t\tlet toWidth: number;\n\t\tlet toHeight: number;\n\n\t\tif (from instanceof Node) {\n\t\t\tfromWidth = from.width;\t\t\n\t\t\tfromHeight = from.height;\t\t\n\t\t}\n\t\tif (to instanceof Node) {\n\t\t\ttoWidth = to.width;\t\t\n\t\t\ttoHeight = to.height;\t\t\n\t\t}\n\t\tif (from instanceof Label) {\n\t\t\tfromWidth = from.getRealWidth(this.canvas.current.getContext(\"2d\"));\t\t\n\t\t\tfromHeight = from.getRealHeight();\t\t\n\t\t}\n\t\tif (to instanceof Label) {\n\t\t\ttoWidth = to.getRealWidth(this.canvas.current.getContext(\"2d\"));\t\t\n\t\t\ttoHeight = to.getRealHeight();\t\t\n\t\t}\n\n\t\treturn {\n\t\t\tx: from.pos.x + (offX * (fromWidth + toWidth)),\n\t\t\ty: from.pos.y + (offY * (fromHeight + toHeight))\n\t\t};\n\n\t}\n\n\t/**\n\t* Renders all the Drawables to the canvas.\n\t*/\n\tpublic draw = () => {\n\n\t\tlet ctx = this.canvas.current.getContext(\"2d\");\n\n\t\tctx.clearRect(0, 0, this.props.width, this.props.height);\n\n\t\tif (this.drawables) {\n\t\t\tfor (let i = 0; i < this.drawables.length; i++) {\n\t\t\t\tthis.drawables[i].draw(ctx);\t\n\t\t\t}\n\t\t}\n\n\t}\n\n\tconstructor(props: any) {\n\t\tsuper(props);\n\t\tthis.canvas = React.createRef();\n\t}\t\n\n\tcomponentWillUnmount() {\n\t\tthis.stopLineAnimations();\n\t}\n\n\trender() {\n\t\treturn <canvas width={this.props.width} height={this.props.height} ref={this.canvas} className=\"flow-canvas\"></canvas>;\n\t}\n\n}\n\nexport default FlowCanvas;","/**\n * Draws a rounded rectangle in the canvas.\n * @param x The x coordinate of the rectangle.\n * @param y The y coordinate of the rectangle.\n * @param w The width of the rectangle.\n * @param h The height of the rectangle.\n * @param r The radius of the border.\n */\nexport function roundRect(ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number, r: number): CanvasRenderingContext2D {\n\tif (w < 2 * r) r = w / 2;\n\tif (h < 2 * r) r = h / 2;\n\tctx.beginPath();\n\tctx.moveTo(x + r, y);\n\tctx.arcTo(x + w, y, x + w, y + h, r);\n\tctx.arcTo(x + w, y + h, x, y + h, r);\n\tctx.arcTo(x, y + h, x, y, r);\n\tctx.arcTo(x, y, x + w, y, r);\n\tctx.closePath();\n\treturn ctx;\n}","// DNSFlow\n// +=========================+\n// Author: Henrique Colini\n// Version: 2.0 (2019-08-30)\n\nimport React, { Component, RefObject } from \"react\";\n\nimport FlowCanvas, { Node, Label, NodeConnection, Line } from \"../../../components/FlowCanvas\";\nimport ErrorBox from \"../../../components/ErrorBox\";\nimport { Domain, ERROR_INVALID_LABEL, ERROR_FULL_NAME_RANGE, ERROR_SMALL_DOMAIN } from \"../../../wireworks/networking/layers/layer-5/domain\";\n\n// Images used in the canvas.\n\nconst serverImage = new Image();\nconst clientImage = new Image();\n\nimport(\"src/images/layers/5/client.png\").then(res => clientImage.src = res.default);\nimport(\"src/images/layers/5/server.png\").then(res => serverImage.src = res.default);\n\n// Wire colors.\n\nconst greenWire = \"#a9cc78\";\nconst redWire = \"#db938a\";\nconst blueWire = \"#9ac9ed\";\nconst yellowWire = \"#e5c16e\";\n\n// Simulation speed constants.\n\nconst verySlowSpeed = 10;\nconst slowSpeed = 25;\nconst normalSpeed = 100;\nconst fastSpeed = 400;\nconst veryFastSpeed = 600;\n\ntype Speed = \"veryslow\" | \"slow\" | \"normal\" | \"fast\" | \"veryfast\";\n\n// Constants representing the mode of a DNS server.\n\nconst ITERATIVE = \"iterative\";\nconst RECURSIVE = \"recursive\";\n\ntype ServerMode = \"iterative\" | \"recursive\";\n\n/**\n * A data structure that represents servers and hosts.\n */\ntype DNSMachine = {\n\tname: string,\n\tnode: Node,\n\tlabel: Label,\n\tmode: ServerMode\n};\n\n// +==============================================+\n\nclass DnsFlow extends Component {\n\n\t/** The reference to the domain input. */\n\tprivate txtDomain: RefObject<HTMLInputElement>;\n\t/** The reference to the DnsFlowCanvas. */\n\tprivate dnsCanvas: RefObject<DnsFlowCanvas>;\n\t/** The reference to the speed select. */\n\tprivate selectSpeed: RefObject<HTMLSelectElement>;\n\t/** The reference to the Local server mode select. */\n\tprivate selectLocalMode: RefObject<HTMLSelectElement>;\n\t/** The reference to the Root server mode select. */\n\tprivate selectRootMode: RefObject<HTMLSelectElement>;\n\t/** The reference to the TLD server mode select. */\n\tprivate selectTldMode: RefObject<HTMLSelectElement>;\n\t/** The reference to the Intermediary server mode select. */\n\tprivate selectInterMode: RefObject<HTMLSelectElement>;\n\n\tstate = {\n\t\terrorMessage: null as string,\n\t\tdomain: undefined as Domain,\n\t\tspeed: \"normal\" as Speed,\n\t\tlocalMode: \"recursive\" as ServerMode,\n\t\trootMode: \"iterative\" as ServerMode,\n\t\ttldMode: \"iterative\" as ServerMode,\n\t\tinterMode: \"iterative\" as ServerMode\n\t}\n\n\t/**\n\t * Runs the simulation.\n\t */\n\tpublic run = () => {\n\n\t\tthis.setState({errorMessage: null});\n\t\tlet errStr: string = undefined;\n\t\t\n\t\ttry {\n\t\t\t\n\t\t\tlet fullName = this.txtDomain.current.value;\n\t\t\t\n\t\t\tif (fullName === \"localhost\") {\n\t\t\t\terrStr = \"Você não pode usar esse nome.\";\n\t\t\t\tthrow Error();\n\t\t\t} else {\n\n\t\t\t\tlet tmpDomain = Domain.extractDomain(new Domain(\".\", undefined), fullName);\t\n\t\t\t\t\n\t\t\t\tthis.setState(\n\t\t\t\t\t{\n\t\t\t\t\t\tdomain: tmpDomain,\n\t\t\t\t\t\tspeed: this.selectSpeed.current.value,\n\t\t\t\t\t\tlocalMode: this.selectLocalMode.current.value,\n\t\t\t\t\t\trootMode: this.selectRootMode.current.value,\n\t\t\t\t\t\ttldMode: this.selectTldMode.current.value,\n\t\t\t\t\t\tinterMode: this.selectInterMode.current.value,\n\t\t\t\t\t},\n\t\t\t\t\tthis.dnsCanvas.current.run\n\t\t\t\t);\n\t\t\t\t\n\t\t\t}\n\n\t\t} catch (error) {\n\n\t\t\tif (!errStr) {\n\n\t\t\t\tswitch (error.name) {\n\t\t\t\t\tcase ERROR_INVALID_LABEL:\n\t\t\t\t\t\terrStr = \"Esse domínio possui um nome inválido.\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ERROR_FULL_NAME_RANGE:\n\t\t\t\t\t\terrStr = \"Esse domínio possui um nome grande demais.\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ERROR_SMALL_DOMAIN:\n\t\t\t\t\t\terrStr = \"Você deve inserir um domínio com mais partes.\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\terrStr = \"Erro desconhecido (\" + error.name + \").\"\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.setState({errorMessage: \"Entrada inválida. \" + errStr});\n\n\t\t}\n\t}\t\n\n\tconstructor(props: any) {\n\t\tsuper(props);\n\t\tthis.txtDomain = React.createRef();\n\t\tthis.dnsCanvas = React.createRef();\n\t\tthis.selectSpeed = React.createRef();\n\t\tthis.selectLocalMode = React.createRef();\n\t\tthis.selectRootMode = React.createRef();\n\t\tthis.selectTldMode = React.createRef();\n\t\tthis.selectInterMode = React.createRef();\n\t}\t\n\n\trender () {\n\t\treturn (\n\t\t\t<main>\n\t\t\t\t<div className=\"hbox\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label htmlFor=\"domain\">Domínio</label>\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t<input type=\"text\" name=\"domain\" ref={this.txtDomain} onKeyDown={(ev) => {if(ev.key===\"Enter\")this.run()}} placeholder=\"www.exemplo.com.br\"/>\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label htmlFor=\"speed\">Velocidade</label>\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t<select name=\"speed\" id=\"speed\" ref={this.selectSpeed} defaultValue=\"normal\">\n\t\t\t\t\t\t\t\t<option value=\"veryslow\">Muito Lento</option>\n\t\t\t\t\t\t\t\t<option value=\"slow\">Lento</option>\n\t\t\t\t\t\t\t\t<option value=\"normal\">Normal</option>\n\t\t\t\t\t\t\t\t<option value=\"fast\">Rápido</option>\n\t\t\t\t\t\t\t\t<option value=\"veryfast\">Muito Rápido</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t<button onClick={this.run}>Visualizar</button>\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<ErrorBox errorMessage={this.state.errorMessage}/>\n\n\t\t\t\t<DnsFlowCanvas ref={this.dnsCanvas} domain={this.state.domain} speed={this.state.speed} localMode={this.state.localMode} rootMode={this.state.rootMode} tldMode={this.state.tldMode} interMode={this.state.interMode} />\n\n\t\t\t\t<div className=\"hbox\">\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label>Local</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<select id=\"local_mode\" ref={this.selectLocalMode} defaultValue=\"recursive\">\n\t\t\t\t\t\t\t\t<option value=\"iterative\">Iterativo</option>\n\t\t\t\t\t\t\t\t<option value=\"recursive\">Recursivo</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label>Root</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<select id=\"root_mode\" ref={this.selectRootMode} defaultValue=\"iterative\">\n\t\t\t\t\t\t\t\t<option value=\"iterative\">Iterativo</option>\n\t\t\t\t\t\t\t\t<option value=\"recursive\">Recursivo</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label>TLD</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<select id=\"tld_mode\" ref={this.selectTldMode} defaultValue=\"iterative\">\n\t\t\t\t\t\t\t\t<option value=\"iterative\">Iterativo</option>\n\t\t\t\t\t\t\t\t<option value=\"recursive\">Recursivo</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label>Intermediários</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<select id=\"inter_mode\" ref={this.selectInterMode} defaultValue=\"iterative\">\n\t\t\t\t\t\t\t\t<option value=\"iterative\">Iterativos</option>\n\t\t\t\t\t\t\t\t<option value=\"recursive\">Recursivos</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t</main>\n\t\t);\n\t}\n}\n\nexport default DnsFlow;\n\ninterface DnsFlowCanvasProps {\n\tdomain: Domain,\n\tspeed: Speed,\n\tlocalMode: ServerMode,\n\trootMode: ServerMode,\n\ttldMode: ServerMode,\n\tinterMode: ServerMode\n}\n\n/**\n * A component representing the DNSFlow FlowCanvas.\n */\nclass DnsFlowCanvas extends Component<DnsFlowCanvasProps> {\n\n\t/** The reference to the FlowCanvas. */\n\tprivate flowCanvas: RefObject<FlowCanvas>;\n\t/** The origin client. */\n\tprivate client: DNSMachine;\n\t/** The local server. */\n\tprivate local: DNSMachine;\n\t/** The root server. */\n\tprivate root: DNSMachine;\n\t/** The TLD server. */\n\tprivate tld: DNSMachine;\n\t/** The intermediary server. */\n\tprivate inter: DNSMachine;\n\t/** The administrative server. */\n\tprivate admin: DNSMachine;\n\t/** The destination client. */\n\tprivate dest: DNSMachine;\n\t/** The configurations for the line maker. */\n\tprivate makerConfigs = {\n\t\twidth: 0,\n\t\tspeed: 0\n\t}\n\n\t/**\n\t * Runs the simulation.\n\t */\n\tpublic run = () => {\n\n\t\tconst drawables = this.flowCanvas.current.getDrawables();\n\t\tlet drawIndex = drawables.length;\n\n\t\twhile(drawIndex--) {\n\t\t\tif(drawables[drawIndex] instanceof Line) {\n\t\t\t\tthis.flowCanvas.current.removeDrawable(drawables[drawIndex]);\n\t\t\t}\n\t\t}\n\n\t\tthis.flowCanvas.current.stopLineAnimations();\n\n\t\tthis.makerConfigs.width = 10;\n\n\t\tswitch (this.props.speed) {\n\t\t\tcase \"veryslow\": this.makerConfigs.speed = verySlowSpeed; break;\n\t\t\tcase \"slow\": this.makerConfigs.speed = slowSpeed; break;\n\t\t\tcase \"normal\": this.makerConfigs.speed = normalSpeed; break;\n\t\t\tcase \"fast\": this.makerConfigs.speed = fastSpeed; break;\n\t\t\tcase \"veryfast\": this.makerConfigs.speed = veryFastSpeed; break;\n\t\t}\n\n\t\tlet cons = this.calculateConnections(this.props.domain);\n\t\t\n\t\tthis.flowCanvas.current.connectMultipleNodes(cons.connections, cons.success ? this.onSuccess : this.onFailure);\n\n\t}\n\n\t/**\n\t * What to do when a DNS query ends in success. \n\t */\n\tpublic onSuccess = () => {\n\t\tthis.flowCanvas.current.connectNodes(this.client.node, this.dest.node, blueWire, 10, fastSpeed, undefined);\n\t\tthis.flowCanvas.current.connectNodes(this.dest.node, this.client.node, blueWire, 10, fastSpeed, undefined);\n\t}\n\n\t/**\n\t * What to do when a DNS query ends in failure.\n\t */\n\tpublic onFailure = () => {}\n\n\t/**\n\t * Calculates the connections between servers needed in a DNS query. Returns a list of said connections and whether the query was successful.\n\t * @param domain The host domain.\n\t */\n\tpublic calculateConnections = (domain: Domain): { connections: NodeConnection[], success: boolean} => {\n\t\t\n\t\t\n\t\tlet parts = domain.getDomainParts();\n\t\tlet connections: NodeConnection[] = [\n\t\t\tthis.makeConnection(this.client, this.local, \"request\", parts.full + \"?\")\n\t\t];\n\t\tlet success = false;\n\n\t\t// LOCAL returns \".\"\n\t\tif (this.local.mode === ITERATIVE) {\n\t\t\tconnections.push(this.makeConnection(this.local, this.client, \"partial\", \".\"));\n\t\t}\n\t\t// LOCAL returns \"www.example.com.br\"\n\t\telse if (this.local.mode === RECURSIVE) {\n\n\t\t\tconnections.push(this.makeConnection(this.local, this.root, \"request\", parts.full + \"?\"));\n\n\t\t\t// ROOT returns \"br\"\n\t\t\tif (this.root.mode === ITERATIVE) {\n\n\t\t\t\tconnections.push(this.makeConnection(this.root, this.local, \"partial\", parts.tld));\n\t\t\t\tconnections.push(this.makeConnection(this.local, this.tld, \"request\", parts.full + \"?\"));\n\n\t\t\t\t// TLD returns \"com.br\"\n\t\t\t\tif (this.tld.mode === ITERATIVE) {\t\t\t\n\n\t\t\t\t\tif (parts.inter) {\n\n\t\t\t\t\t\t// INTER returns \"example.com.br\"\n\t\t\t\t\t\tif (this.inter.mode === ITERATIVE) {\n\t\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.local, \"partial\", parts.inter + \".\" + parts.tld),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.local, this.inter, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.local, \"partial\", parts.admin + \".\" + parts.inter + \".\" + parts.tld),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.local, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.local, \"full\", parts.full)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// INTER returns \"www.example.com.br\"\n\t\t\t\t\t\telse if (this.inter.mode === RECURSIVE) {\n\t\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.local, \"partial\", parts.inter + \".\" + parts.tld),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.local, this.inter, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.inter, \"full\", parts.full),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.local, \"full\", parts.full)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.local, \"partial\", parts.admin + \".\" + parts.tld),\n\t\t\t\t\t\t\tthis.makeConnection(this.local, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.local, \"full\", parts.full)\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t// TLD returns \"www.example.com.br\"\n\t\t\t\telse if (this.tld.mode === RECURSIVE) {\n\n\t\t\t\t\tif (parts.inter) {\t\t\t\t\t\n\t\t\t\t\t\t// INTER returns \"example.com.br\"\n\t\t\t\t\t\t// ADMIN returns \"www.example.com.br\"\n\t\t\t\t\t\tif (this.inter.mode === ITERATIVE) {\n\t\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.inter, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.tld, \"partial\", parts.admin + \".\" + parts.inter + \".\" + parts.tld),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.tld, \"full\", parts.full)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// INTER returns \"www.example.com.br\"\n\t\t\t\t\t\t// ADMIN returns \"www.example.com.br\"\n\t\t\t\t\t\telse if (this.inter.mode === RECURSIVE) {\n\t\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.inter, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.inter, \"full\", parts.full),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.tld, \"full\", parts.full)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// ADMIN returns \"www.example.com.br\"\n\t\t\t\t\telse {\n\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.tld, \"full\", parts.full)\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\n\t\t\t\t\tconnections.push(this.makeConnection(this.tld, this.local, \"full\", parts.full));\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// ROOT returns \"www.example.com.br\"\n\t\t\telse if (this.root.mode === RECURSIVE) {\n\n\t\t\t\tconnections.push(this.makeConnection(this.root, this.tld, \"request\", parts.full + \"?\"));\n\n\t\t\t\t// TLD returns \"com.br\"\n\t\t\t\tif (this.tld.mode === ITERATIVE) {\n\t\t\t\t\t\n\t\t\t\t\tif (parts.inter) {\n\n\t\t\t\t\t\tconnections.push(this.makeConnection(this.tld, this.root, \"partial\", parts.inter + \".\" + parts.tld));\n\n\t\t\t\t\t\t// INTER returns \"example.com.br\"\n\t\t\t\t\t\t// ADMIN returns \"www.example.com.br\"\n\t\t\t\t\t\tif (this.inter.mode === ITERATIVE) {\n\t\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\t\tthis.makeConnection(this.root, this.inter, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.root, \"partial\", parts.admin + \".\" + parts.inter + \".\" + parts.tld),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.root, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.root, \"full\", parts.full)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// INTER returns \"www.example.com.br\"\n\t\t\t\t\t\t// ADMIN returns \"www.example.com.br\"\n\t\t\t\t\t\telse if (this.inter.mode === RECURSIVE) {\n\t\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\t\tthis.makeConnection(this.root, this.inter, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.inter, \"full\", parts.full),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.root, \"full\", parts.full)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// ADMIN returns \"www.example.com.br\"\n\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.root, \"partial\", parts.admin + \".\" + parts.tld),\n\t\t\t\t\t\t\tthis.makeConnection(this.root, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.root, \"full\", parts.full)\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t// TLD returns \"www.example.com.br\"\n\t\t\t\telse if (this.tld.mode === RECURSIVE) {\n\n\t\t\t\t\tif (parts.inter) {\n\t\t\t\t\t\t// INTER returns \"example.com.br\"\n\t\t\t\t\t\t// ADMIN returns \"www.example.com.br\"\n\t\t\t\t\t\tif (this.inter.mode === ITERATIVE) {\n\t\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.inter, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.tld, \"partial\", parts.admin + \".\" + parts.inter + \".\" + parts.tld),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.tld, \"full\", parts.full)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// INTER returns \"www.example.com.br\"\n\t\t\t\t\t\t// ADMIN returns \"www.example.com.br\"\n\t\t\t\t\t\telse if (this.inter.mode === RECURSIVE) {\n\t\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.inter, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.inter, \"full\", parts.full),\n\t\t\t\t\t\t\t\tthis.makeConnection(this.inter, this.tld, \"full\", parts.full)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// ADMIN returns \"www.example.com.br\"\n\t\t\t\t\t\tconnections.push(...[\n\t\t\t\t\t\t\tthis.makeConnection(this.tld, this.admin, \"request\", parts.full + \"?\"),\n\t\t\t\t\t\t\tthis.makeConnection(this.admin, this.tld, \"full\", parts.full)\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\n\t\t\t\t\tconnections.push(this.makeConnection(this.tld, this.root, \"full\", parts.full));\n\n\t\t\t\t}\n\n\t\t\t\tconnections.push(this.makeConnection(this.root, this.local, \"full\", parts.full));\n\n\t\t\t}\n\n\t\t\tconnections.push(this.makeConnection(this.local, this.client, \"full\", parts.full));\n\t\t\tsuccess = true;\n\t\t}\n\n\t\treturn { connections: connections, success: success };\n\n\t}\n\n\t/**\n\t * Creates NodeConnections.\n\t * @param from What machine to start from.\n\t * @param to What machine to go to.\n\t * @param kind What kind of connection to create. Must be either \"request\", \"partial\" (responses) or \"full\" (responses).\n\t * @param msg What message to carry in the end of the line.\n\t */\n\tpublic makeConnection = (from: DNSMachine, to: DNSMachine, kind: \"request\" | \"partial\" | \"full\", msg: string): NodeConnection => {\n\t\tlet style: string;\n\t\tswitch (kind) {\n\t\t\tcase (\"request\"): style = yellowWire; break;\n\t\t\tcase (\"partial\"): style = redWire; break;\n\t\t\tcase (\"full\"): style = greenWire; break;\n\t\t}\n\t\treturn { from: from.node, to: to.node, strokeStyle: style, lineWidth: this.makerConfigs.width, speed: this.makerConfigs.speed, labelText: msg };\n\t}\n\n\t/**\n\t * Deletes all drawables, sets up all Nodes and their Labels.\n\t */\n\tpublic resetCanvas = () => {\n\n\t\tlet pl = 80; // padding\n\t\tlet pr = 80;\n\t\tlet pt = 70;\n\t\tlet pb = 70;\n\n\t\tlet w = this.flowCanvas.current.props.width;\n\t\tlet h = this.flowCanvas.current.props.height;\n\t\t\n\t\tthis.client.node = new Node({ x: pl, y: h - pb },           60, 60, {l: 10, t: 10, r: 10, b: 10}, clientImage);\n\t\tthis.local.node  = new Node({ x: pl, y: h - pb - 180 },     60, 60, {l: 10, t: 10, r: 10, b: 40}, serverImage);\n\t\tthis.root.node   = new Node({ x: pl, y: pt + 80 },          60, 60, {l: 10, t: 10, r: 10, b: 10}, serverImage);\n\t\tthis.inter.node  = new Node({ x: w - pr, y: pt + 80 },      60, 60, {l: 10, t: 10, r: 10, b: 10}, serverImage);\n\t\tthis.tld.node    = new Node({ x: (w+pl-pr)/2, y: pt },      60, 60, {l: 10, t: 10, r: 10, b: 10}, serverImage);\n\t\tthis.admin.node  = new Node({ x: w - pr, y: h - pb - 180 }, 60, 60, {l: 10, t: 10, r: 10, b: 10}, serverImage);\n\t\tthis.dest.node   = new Node({ x: w - pr, y: h - pb },       60, 60, {l: 10, t: 10, r: 10, b: 10}, clientImage);\n\n\t\tthis.client.label = new Label({x: 0, y: 0}, this.client.name, \"#505050\", \"transparent\", 6, 0, \"14px Work Sans, Montserrat, sans-serif\", 14);\n\t\tthis.local.label  = new Label({x: 0, y: 0}, this.local.name,  \"#505050\", \"transparent\", 6, 0, \"14px Work Sans, Montserrat, sans-serif\", 14);\n\t\tthis.root.label   = new Label({x: 0, y: 0}, this.root.name,   \"#505050\", \"transparent\", 6, 0, \"14px Work Sans, Montserrat, sans-serif\", 14);\n\t\tthis.tld.label    = new Label({x: 0, y: 0}, this.tld.name,    \"#505050\", \"transparent\", 6, 0, \"14px Work Sans, Montserrat, sans-serif\", 14);\n\t\tthis.inter.label  = new Label({x: 0, y: 0}, this.inter.name,  \"#505050\", \"transparent\", 6, 0, \"14px Work Sans, Montserrat, sans-serif\", 14);\n\t\tthis.admin.label  = new Label({x: 0, y: 0}, this.admin.name,  \"#505050\", \"transparent\", 6, 0, \"14px Work Sans, Montserrat, sans-serif\", 14);\n\t\tthis.dest.label   = new Label({x: 0, y: 0}, this.dest.name,   \"#505050\", \"transparent\", 6, 0, \"14px Work Sans, Montserrat, sans-serif\", 14);\n\t\t\n\t\tthis.client.label.pos = this.flowCanvas.current.getAlignedPoint(this.client.node, this.client.label, \"bottom\", \"center\");\n\t\tthis.local.label.pos  = this.flowCanvas.current.getAlignedPoint(this.local.node, this.local.label, \"bottom\", \"center\");\n\t\tthis.root.label.pos   = this.flowCanvas.current.getAlignedPoint(this.root.node, this.root.label, \"top\", \"center\");\n\t\tthis.tld.label.pos    = this.flowCanvas.current.getAlignedPoint(this.tld.node, this.tld.label, \"top\", \"center\");\n\t\tthis.inter.label.pos  = this.flowCanvas.current.getAlignedPoint(this.inter.node, this.inter.label, \"top\", \"center\");\n\t\tthis.admin.label.pos  = this.flowCanvas.current.getAlignedPoint(this.admin.node, this.admin.label, \"bottom\", \"center\");\n\t\tthis.dest.label.pos   = this.flowCanvas.current.getAlignedPoint(this.dest.node, this.dest.label, \"bottom\", \"center\");\n\n\t\tthis.flowCanvas.current.clearDrawables();\n\n\t\tthis.flowCanvas.current.addDrawable(this.client.node);\n\t\tthis.flowCanvas.current.addDrawable(this.local.node);\n\t\tthis.flowCanvas.current.addDrawable(this.root.node);\n\t\tthis.flowCanvas.current.addDrawable(this.inter.node);\n\t\tthis.flowCanvas.current.addDrawable(this.admin.node);\n\t\tthis.flowCanvas.current.addDrawable(this.dest.node);\n\t\tthis.flowCanvas.current.addDrawable(this.tld.node);\n\n\t\tthis.flowCanvas.current.addDrawable(this.client.label);\n\t\tthis.flowCanvas.current.addDrawable(this.local.label);\n\t\tthis.flowCanvas.current.addDrawable(this.root.label);\n\t\tthis.flowCanvas.current.addDrawable(this.inter.label);\n\t\tthis.flowCanvas.current.addDrawable(this.admin.label);\n\t\tthis.flowCanvas.current.addDrawable(this.dest.label);\n\t\tthis.flowCanvas.current.addDrawable(this.tld.label);\n\n\t\tthis.flowCanvas.current.draw();\n\n\t}\n\n\tcomponentWillReceiveProps(props: DnsFlowCanvasProps) {\t\t\n\t\tthis.local.mode = props.localMode;\n\t\tthis.root.mode = props.rootMode;\n\t\tthis.tld.mode = props.tldMode;\n\t\tthis.inter.mode = props.interMode;\n\t}\n\n\n\n\tcomponentDidMount() {\t\t\n\t\t\n\t\tthis.client = { name: \"Host Cliente\", node: undefined, label: undefined, mode: undefined };\n\t\tthis.local = { name: \"Local\", node: undefined, label: undefined, mode: undefined };\n\t\tthis.root = { name: \"Root\", node: undefined, label: undefined, mode: undefined };\n\t\tthis.tld = { name: \"TLD\", node: undefined, label: undefined, mode: undefined };\n\t\tthis.inter = { name: \"Intermediários\", node: undefined, label: undefined, mode: undefined };\n\t\tthis.admin = { name: \"Autoritativo\", node: undefined, label: undefined, mode: undefined };\n\t\tthis.dest = { name: \"Host Destino\", node: undefined, label: undefined, mode: undefined };\n\n\t\tthis.resetCanvas();\n\n\t\tserverImage.onload = this.flowCanvas.current.draw;\n\t\tclientImage.onload = this.flowCanvas.current.draw;\n\t}\n\n\tconstructor(props: DnsFlowCanvasProps) {\n\t\tsuper(props);\n\t\tthis.flowCanvas = React.createRef();\n\t}\n\n\trender() {\n\t\treturn <FlowCanvas ref={this.flowCanvas} width={750} height={560} fixedDeltaTime={1000 / 60}/>;\n\t}\n\n}"],"sourceRoot":""}