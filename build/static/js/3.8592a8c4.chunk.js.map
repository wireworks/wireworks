{"version":3,"sources":["app/wireworks/networking/byte.ts","app/wireworks/utils/math.ts","app/wireworks/networking/layers/layer-3/address.ts","app/components/ErrorBox.tsx","app/wireworks/networking/layers/layer-5/domain.ts","images/layers/5/unreachable.png","app/pages/tools/layer-5/dnstree.tsx"],"names":["ByteZero","Byte","ByteMax","ERROR_BYTE_RANGE","value","Object","_home_void_Documents_wireworks_github_io_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","bits","decimal","setDecimal","setBits","_home_void_Documents_wireworks_github_io_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","Math","floor","err","RangeError","name","arr","length","bit8","i","undefined","booleanArrayToBit8","decimalToBinary","binaryToDecimal","index","arguments","slice","clamp","min","max","binary","reversed","realIndex","pow","tmpDecimal","reverse","__webpack_require__","d","__webpack_exports__","Byte4Zero","cloneByte4","byte4","clone","ERROR_MASK_RANGE","ERROR_ADDRESS_PARSE","ERROR_NOT_NETWORK","joinBitIndex","byteIndex","bitIndex","splitBitIndex","byte4Index","Address","ip","mask","requireMask","requireNetwork","maskShort","parseAddress","setMaskShort","setMask","isNetworkAddress","Error","bytes","Array","minByte","maskByte","bit","maxByte","allowAbove30","compare","getNetworkAddress","getBroadcastAddress","other","j","ipBytes","maskBytes","net","getDecimal","subnets","secondIpBytes","_splitBitIndex","maskShortTmp","end","tmpMask","address","trim","match","exec","ipByte0","parseInt","ipByte1","ipByte2","ipByte3","setIp","matchIp","omitMask","shortMaskString","getMaskShort","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","ErrorBox","_ref","errorMessage","a","createElement","className","ERROR_INVALID_LABEL","ERROR_FULL_NAME_RANGE","ERROR_SMALL_DOMAIN","Domain","label","parent","subdomains","setParent","setAddress","setLabel","getFullName","overrideAddresses","concat","sub","thisSub","getSubdomain","merge","push","toLowerCase","test","revalidateLabel","detach","splice","indexOf","getLabel","domainParts","split","error","fullStr","tldStr","destStr","interStr","unshift","middle","full","tld","dest","inter","admin","first","prefix","isTail","str","toString","getTreeStrRaw","root","fullName","parts","curr","next","getSubdomains","module","exports","DnsTree","props","_this","_home_void_Documents_wireworks_github_io_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_void_Documents_wireworks_github_io_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","txtSiteTitle","txtSiteAddress","txtDomainName","txtDomainAddress","sites","state","siteErrorMessage","domainErrorMessage","rootDomain","createSite","errStr","current","site","style","random","setState","console","removeSite","registerDomain","tmpRoot","domain","extractDomain","addressStr","removeDomain","window","confirm","removeDomainAddress","React","createRef","_this2","react__WEBPACK_IMPORTED_MODULE_5___default","FakeBrowser","htmlFor","type","id","ref","onKeyDown","ev","placeholder","onClick","_components_ErrorBox__WEBPACK_IMPORTED_MODULE_11__","SiteList","DomainTree","Component","_this3","addressBar","pageStatus","addressError","pageStyle","pageTitle","failMessage","loading","refreshBrowser","foundAddress","alreadyLoaded","setTimeout","Fragment","tmpCurr","exit","getAddress","exists","displayName","_this4","src","failImage","alt","_this5","siteComponents","_loop","renderBranch","_this6","getParent"],"mappings":"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","file":"static/js/3.8592a8c4.chunk.js","sourcesContent":["import { decimalToBinary, binaryToDecimal } from \"../utils/math\";\n\n/**\n * An array of 8 bits (boolean values).\n */\nexport type Bit8 = [boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean];\n\n/**\n * Returns a Bit8 filled with false.\n */\nexport function Bit8Zero(): Bit8 {\n\treturn [false, false, false, false, false, false, false, false];\n}\n\n/**\n * Returns a Bit8 filled with true.\n */\nexport function Bit8Max(): Bit8 {\n\treturn [true, true, true, true, true, true, true, true];\n}\n\n/**\n * Returns a Byte corresponding to the number 0.\n */\nexport function ByteZero(): Byte {\n\treturn new Byte(Bit8Zero());\n}\n\n/**\n * Returns a Byte corresponding to the number 255.\n */\nexport function ByteMax(): Byte {\n\treturn new Byte(Bit8Max());\n}\n\nexport function booleanArrayToBit8 (arr: boolean[]): Bit8 {\n\tif (arr.length > 8) {\n\t\tthrow new RangeError(\"The boolean array must have a length of 8 or less\");\n\t}\n\tlet bit8: Bit8 = Bit8Zero();\n\tfor (let i = 0; i < arr.length; i++) {\n\t\tbit8[i] = arr[i] !== undefined ? arr[i] : false;\n\t}\n\treturn bit8;\n}\n\n/**\n * Error name for a byte outside the correct range.\n */\nexport const ERROR_BYTE_RANGE = \"ByteRangeError\";\n\n/**\n * A Byte, composed of 8 bits (boolean values).\n * @author Henrique Colini\n */\nexport class Byte {\n\n\t/**\n\t * This Byte's Bit8 representation.\n\t */\t\n\tprivate bits: Bit8;\n\n\t/**\n\t * This Byte's numerical representation.\n\t */\n\tprivate decimal: number;\n\t\n\t/**\n\t * Constructs a Byte from a number (0-255) or a Bit8.\n\t * @constructor\n\t * @param  {number|Bit8} value The value of this Byte.\n\t */\n\n\tconstructor(value: number | Bit8) {\n\n\t\tif (typeof value === \"number\") {\n\t\t\tthis.setDecimal(value);\n\t\t}\n\t\telse {\n\t\t\tthis.setBits(value);\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the value of this Byte, using a number (0-255).\n\t * @param  {number} decimal\n\t */\n\n\tsetDecimal(decimal: number): void {\n\n\t\tif (decimal < 0 || decimal > 255 || decimal !== Math.floor(decimal)) {\n\t\t\tlet err = new RangeError(\"The decimal value of a byte must be an integer between 0-255 (inclusive)\");\n\t\t\terr.name = ERROR_BYTE_RANGE;\n\t\t\tthrow err;\n\t\t}\n\n\t\tthis.bits = booleanArrayToBit8(decimalToBinary(decimal));\n\t\tthis.decimal = decimal;\n\n\t}\n\n\t/**\n\t * Sets the value of this Byte, using a Bit8.\n\t * @param  {Bit8} bits\n\t */\n\n\tsetBits(bits: Bit8): void {\n\n\t\tthis.bits = bits;\n\t\tthis.decimal = binaryToDecimal(bits);\n\n\t}\n\n\t/**\n\t * Returns this Byte's numeric value.\n\t */\n\n\tgetDecimal(): number {\n\t\treturn this.decimal;\n\t}\n\n\t/**\n\t * Returns this Byte's Bit8 representation.\n\t */\n\n\tgetBits(): Bit8 {\n\t\treturn this.bits;\n\t}\n\n\t/**\n\t * Getter/Setter of a single bit from this Byte.\n\t * @param  {number} index The index of the bit.\n\t * @param  {boolean|undefined=undefined} value Optional. Sets the value for this bit.\n\t */\n\n\tbit(index: number, value: boolean | undefined = undefined): boolean {\n\n\t\tif (value !== undefined) {\n\t\t\tlet bits = this.bits;\n\t\t\tbits[index] = value;\n\t\t\tthis.setBits(bits);\n\t\t}\n\n\t\treturn this.bits[index];\n\n\t}\n\n\t/**\n\t * Clones this Byte.\n\t */\n\tclone(): Byte {\n\n\t\treturn new Byte(this.bits.slice() as Bit8)\n\n\t}\n\n}","/**\n * Returns a value, clamped between max and min.\n * @param  {number} value The number to be clamped.\n * @param  {number} min The minimum possible number.\n * @param  {number} max The maximum possible number.\n */\nexport function clamp(value: number, min: number, max: number): number {\n\treturn Math.min(Math.max(value, min), max);\n};\n\n/**\n * Converts a binary number (as a string, boolean array, or number array) to a decimal number.\n * @param  {boolean[]} binary The number to be converted. An array of booleans, read from left to right (e.g. 001 equals 4).\n * @param  {boolean} reversed Optional. Whether the input should be reversed (read from right to left). Defaults to false.\n */\nexport function binaryToDecimal(binary: boolean[], reversed: boolean = false): number {\n\n\tif (binary.length === 0) {\n\t\treturn 0;\n\t}\n\n\tlet decimal = 0;\n\n\tfor (let realIndex = 0; realIndex < binary.length; realIndex++) {\n\n\t\tlet i = reversed ? binary.length - realIndex - 1 : realIndex;\n\n\t\tdecimal += binary[i] ? Math.pow(2, i) : 0;\n\t\t\n\t}\n\n\treturn decimal;\n\t\n}\n\n/**\n * Converts a decimal number (must be a positive integer) to an array of booleans (read from left to right, such that 001 equals 4).\n * @param  {number} decimal The number to be converted. Must be a positive integer.\n * @param  {boolean} reversed Optional. Whether the output should be reversed (read from right to left). Defaults to false.\n */\nexport function decimalToBinary(decimal: number, reversed: boolean = false): boolean[] {\n\n\tif (decimal < 0) {\n\t\tthrow new RangeError(\"Attempting to convert negative number to binary\");\n\t}\n\n\tif (decimal !== Math.floor(decimal)) {\n\t\tthrow new RangeError(\"Attempting to convert non-integer number to binary\");\n\t}\n\n\tlet binary: boolean[] = [];\n\n\tlet tmpDecimal = decimal, i = 0;\n\n\twhile (tmpDecimal > 0) {\n\n\t\tbinary[i] = tmpDecimal % 2 ? true : false;\n\t\ttmpDecimal = Math.floor(tmpDecimal / 2);\n\n\t\ti++;\n\n\t}\n\n\tif (reversed) {\n\t\tbinary.reverse();\n\t}\n\n\treturn binary;\n\n}","import { Byte, ByteZero, ByteMax } from \"../../byte\";\n\n/**\n * An array of 4 Bytes.\n */\nexport type Byte4 = [Byte,Byte,Byte,Byte];\n\n/**\n * Returns a Byte4 corresponding to 0, 0, 0, 0.\n */\nexport function Byte4Zero(): Byte4 {\n\treturn [ByteZero(), ByteZero(), ByteZero(), ByteZero()];\n}\n\n/**\n * Returns a Byte4 corresponding to 255, 255, 255, 255.\n */\nexport function Byte4Max(): Byte4 {\n\treturn [ByteMax(), ByteMax(), ByteMax(), ByteMax()];\n}\n\n/**\n * Clones a Byte4.\n * @param  {Byte4} byte4 The Byte4 to be cloned.\n */\nexport function cloneByte4(byte4: Byte4): Byte4 {\n\n\tbyte4 = byte4.slice() as Byte4;\n\n\tfor (let i = 0; i < 4; i++) {\n\t\tbyte4[i] = byte4[i].clone();\t\t\n\t}\n\n\treturn byte4;\n\n}\n\n/**\n * Error name for a mask with holes.\n */\nexport const ERROR_MASK_HOLES = \"MaskHolesError\";\n/**\n * Error name for a mask outside the correct range.\n */\nexport const ERROR_MASK_RANGE = \"MaskRangeError\";\n/**\n * Error name for a malformated address string.\n */\nexport const ERROR_ADDRESS_PARSE = \"AddressParseError\";\n/**\n * Error name for a when an Address should be a Network Address, but isn't.\n */\nexport const ERROR_NOT_NETWORK = \"NotNetworkError\";\n\n/**\n * Converts a bit in Byte index to a bit in Byte4 index.\n * @param  {number} byteIndex The index of the Byte in a Byte4.\n * @param  {number} bitIndex The index of the bit in the Byte.\n */\nexport function joinBitIndex(byteIndex: number, bitIndex: number): number {\n\tif (byteIndex > 3 || byteIndex < 0) {\n\t\tthrow new RangeError(\"The byteIndex must be between 0-3 (inclusive)\");\n\t}\n\tif (bitIndex > 7 || bitIndex < 0) {\n\t\tthrow new RangeError(\"The bitIndex must be between 0-7 (inclusive)\");\n\t}\n\treturn (8 * byteIndex) + (7 - bitIndex);\n}\n\n/**\n * Converts a bit in Byte4 index to a bit in Byte index.\n * @param  {number} byte4Index The index of the bit in a Byte4.\n */\nexport function splitBitIndex(byte4Index: number): { byteIndex: number, bitIndex: number } {\n\tif (byte4Index > 31 || byte4Index < 0) {\n\t\tthrow new RangeError(\"The byte4Index must be between 0-31 (inclusive)\");\n\t}\n\treturn {\n\t\tbyteIndex: Math.floor(byte4Index / 8),\n\t\tbitIndex: 7 - (byte4Index % 8)\n\t};\n}\n\n/**\n * A full IP/Mask address.\n * @author Henrique Colini\n */\nexport class Address {\n\t\n\t/**\n\t * This Address' IP.\n\t */\n\tprivate ip: Byte4;\n\n\t/**\n\t * This Address' mask.\n\t */\n\tprivate mask: Byte4;\n\n\t/**\n\t * The numerical representation of this Address' mask.\n\t */\n\tprivate maskShort: number;\n\n\t\n\t/**\n\t * Constructs an Address, given an IP and a mask.\n\t * @constructor\n\t * @param  {Byte4|string} ip The IP of this Address. May be a Byte4 or a formatted string.\n\t * @param  {Byte4|number} mask Optional. The mask of this Address. May be a Byte4 or its numerical representation. If not given, defaults to /0.\n\t * @param  {boolean} requireMask Optional. If set to true, the mask becomes a required parameter in the formatted string.\n\t * @param  {boolean} requireNetwork Optional. If true, throws an error if this is not a Network Address. Defaults to false.\n\t */\n\tconstructor(ip: Byte4 | string, mask?: Byte4 | number, requireMask: boolean = false, requireNetwork: boolean = false) {\n\n\t\tif (typeof ip === \"string\") {\n\t\t\tthis.parseAddress(ip, requireMask);\n\t\t}\n\t\telse {\n\t\t\tthis.ip = ip;\n\t\t}\n\n\t\tif (!this.mask) {\n\t\t\tif (mask) {\n\t\t\t\tif (typeof mask === \"number\") {\n\t\t\t\t\tthis.setMaskShort(mask);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.setMask(mask);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.setMask(Byte4Zero());\n\t\t\t}\n\t\t}\n\n\t\tif (requireNetwork && !this.isNetworkAddress(true)) {\n\t\t\tlet err = new Error(\"Not a Network Address\");\n\t\t\terr.name = ERROR_NOT_NETWORK;\n\t\t\tthrow err;\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the Network Address of this Address.\n\t * @param {boolean} allowAbove30 Optional. If false, returns undefined if the mask is greater than 30. Defaults to false.\n\t */\n\tpublic getNetworkAddress(allowAbove30: boolean = false): Address {\n\n\t\tif (!allowAbove30 && this.maskShort > 30) return undefined;\n\n\t\tlet bytes: Byte4 = Array<Byte>(4) as Byte4;\n\n\t\tfor (let i = 0; i < 4; i++) {\n\n\t\t\tlet minByte = this.ip[i].clone();\n\t\t\tlet maskByte = this.mask[i];\n\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\tif (!maskByte.bit(i)) {\n\t\t\t\t\tminByte.bit(i, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbytes[i] = minByte;\n\n\t\t}\n\n\t\treturn new Address(bytes, cloneByte4(this.mask));\n\n\t}\n\n\t/**\n\t * Returns the Broadcast Address of this Address' network.\n\t * @param {boolean} allowAbove30 Optional. If false, returns undefined if the mask is greater than 30. Defaults to false.\n\t */\n\tpublic getBroadcastAddress(allowAbove30: boolean = false): Address {\n\n\t\tif (!allowAbove30 && this.maskShort > 30) return undefined;\n\n\t\tlet bytes: Byte4 = Array<Byte>(4) as Byte4;\n\n\t\tfor (let i = 0; i < 4; i++) {\n\n\t\t\tlet maxByte = this.ip[i].clone();\n\t\t\tlet maskByte = this.mask[i];\n\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\tif (!maskByte.bit(i)) {\n\t\t\t\t\tmaxByte.bit(i, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbytes[i] = maxByte;\n\n\t\t}\n\n\t\treturn new Address(bytes, cloneByte4(this.mask));\n\n\t}\n\t\n\t/**\n\t * Returns whether this Address is a Network Address.\n\t * @param {boolean} allowAbove30 Optional. If false, returns false if the mask is greater than 30. Defaults to false.\n\t */\n\tpublic isNetworkAddress(allowAbove30: boolean = false): boolean {\n\t\treturn this.compare(this.getNetworkAddress(allowAbove30));\n\t};\n\n\t/**\n\t * Returns whether this Address is a Broadcast Address.\n\t * @param {boolean} allowAbove30 Optional. If false, returns false if the mask is greater than 30. Defaults to false.\n\t */\n\tpublic isBroadcastAddress(allowAbove30: boolean = false): boolean {\n\t\treturn this.compare(this.getBroadcastAddress(allowAbove30));\n\t};\n\t\n\t/**\n\t * Returns true if this Address is the same as another.\n\t * @param {Address} other the Address to be compared with.\n\t */\n\tpublic compare(other: Address): boolean {\n\n\t\tif (!other) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this === other)\n\t\t\treturn true;\n\n\t\tif (this.ip === other.ip && (this.mask === other.mask || this.maskShort === other.maskShort))\n\t\t\treturn true;\n\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tfor (let j = 0; j < 8; j++) {\n\t\t\t\tif ((this.ip[i].bit(j) !== other.ip[i].bit(j)) || (this.mask[i].bit(j) !== other.mask[i].bit(j))) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t}\n\n\t\treturn true;\n\n\t}\n\t\n\t/**\n\t * Returns the amount of hosts that this Address' network has.\n\t * @param {boolean} requireNetwork Optional. If true, throws an error if this is not a Network Address. Defaults to false.\n\t */\n\tpublic numberOfHosts(requireNetwork: boolean = false): number {\n\n\t\tif(requireNetwork && !this.isNetworkAddress(true)) {\n\t\t\tlet err = new Error(\"Not a Network Address\");\n\t\t\terr.name = ERROR_NOT_NETWORK;\n\t\t\tthrow err;\n\t\t}\n\n\t\tif (this.maskShort === 31)\n\t\t\treturn 2;\n\t\tif (this.maskShort === 32)\n\t\t\treturn 1;\n\t\treturn (Math.pow(2, 32 - this.maskShort) - 2);\n\n\t}\n\n\t/**\n\t * Returns the first valid host Address of this network.\n\t * @param  {boolean} requireNetwork Optional. If true, throws an error if this is not a Network Address. Defaults to false.\n\t */\n\tpublic firstHost(requireNetwork: boolean = false): Address {\n\n\t\tif (requireNetwork && !this.isNetworkAddress(true)) {\n\t\t\tlet err = new Error(\"Not a Network Address\");\n\t\t\terr.name = ERROR_NOT_NETWORK;\n\t\t\tthrow err;\n\t\t}\n\n\t\tlet ipBytes: Byte4;\n\t\tlet maskBytes: Byte4;\n\n\t\tif (requireNetwork) {\n\t\t\tipBytes = cloneByte4(this.ip);\n\t\t\tmaskBytes = cloneByte4(this.mask);\n\t\t}\n\t\telse {\n\t\t\tlet net = this.getNetworkAddress(true);\n\t\t\tipBytes = net.ip;\n\t\t\tmaskBytes = net.mask;\n\t\t}\n\n\t\tif (this.maskShort < 31) {\n\t\t\tipBytes[3].setDecimal(ipBytes[3].getDecimal() + 1);\n\t\t}\n\n\t\treturn new Address(ipBytes, maskBytes);\n\n\t}\n\n\t/**\n\t * Returns the last valid host Address of this network.\n\t * @param  {boolean} requireNetwork Optional. If true, throws an error if this is not a Network Address. Defaults to false.\n\t */\n\tpublic lastHost(requireNetwork: boolean = false): Address {\n\n\t\tif (requireNetwork && !this.isNetworkAddress(true)) {\n\t\t\tlet err = new Error(\"Not a Network Address\");\n\t\t\terr.name = ERROR_NOT_NETWORK;\n\t\t\tthrow err;\n\t\t}\n\n\t\tlet ipBytes: Byte4;\n\t\tlet maskBytes: Byte4;\n\n\t\tlet net = this.getBroadcastAddress(true);\n\t\tipBytes = net.ip;\n\t\tmaskBytes = net.mask;\n\n\t\tif (this.maskShort < 31) {\n\t\t\tipBytes[3].setDecimal(ipBytes[3].getDecimal() - 1);\n\t\t}\n\n\t\treturn new Address(ipBytes, maskBytes);\n\n\t}\n\n\t/**\n\t * Divides this Address into two subnets.\n\t * @param  {boolean} requireNetwork Optional. If true, throws an error if this is not a Network Address. Defaults to false.\n\t */\n\tpublic subdivide(requireNetwork: boolean = false): [Address, Address] {\n\n\t\tif (requireNetwork && !this.isNetworkAddress(true)) {\n\t\t\tlet err = new Error(\"Not a Network Address\");\n\t\t\terr.name = ERROR_NOT_NETWORK;\n\t\t\tthrow err;\n\t\t}\n\n\t\tlet subnets: [Address, Address] = [undefined, undefined];\n\n\t\tif (this.maskShort === 32) {\n\t\t\treturn subnets;\n\t\t}\n\n\t\tlet ipBytes: Byte4;\n\n\t\tif (requireNetwork) {\n\t\t\tipBytes = cloneByte4(this.ip);\n\t\t}\n\t\telse {\n\t\t\tlet net = this.getNetworkAddress(true);\n\t\t\tipBytes = net.ip;\n\t\t}\n\n\t\tsubnets[0] = new Address(cloneByte4(ipBytes), this.maskShort+1);\n\t\t\n\t\tlet secondIpBytes: Byte4 = cloneByte4(ipBytes);\n\t\tlet {byteIndex, bitIndex} = splitBitIndex(this.maskShort);\n\t\tsecondIpBytes[byteIndex].bit(bitIndex, true);\n\n\t\tsubnets[1] = new Address(secondIpBytes, this.maskShort+1);\n\n\t\treturn subnets;\n\n\t}\n\t\n\t/**\n\t * Sets this Address' mask.\n\t * @param  {Byte4} mask The Byte4 mask to be set.\n\t */\n\tpublic setMask(mask: Byte4): void {\n\n\t\tlet maskShortTmp = 0;\n\t\tlet end = false;\n\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tfor (let j = 0; j < 8; j++) {\n\n\t\t\t\tif (mask[i].bit(8 - 1 - j)) {\n\t\t\t\t\tif(!end) {\n\t\t\t\t\t\tmaskShortTmp++;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet err = new Error(\"Mask contains holes\");\n\t\t\t\t\t\terr.name = ERROR_MASK_HOLES;\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tend = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.maskShort = maskShortTmp;\n\t\tthis.mask = mask;\n\n\t}\n\n\t/**\n\t * Sets this Address' mask, given its numerical representation (0-32).\n\t * @param  {number} maskShort The numerical mask to be set.\n\t */\n\tpublic setMaskShort(maskShort: number): void {\n\n\t\tif (maskShort < 0 || maskShort > 32) {\n\t\t\tlet err = new RangeError(\"The short mask should be between 0 and 32\");\n\t\t\terr.name = ERROR_MASK_RANGE;\n\t\t\tthrow err;\n\t\t}\n\n\t\tlet tmpMask: Byte4 = Byte4Zero();\n\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tfor (let j = 0; j < 8; j++) {\n\t\t\t\tif (((8 * i) + j) < maskShort) {\n\t\t\t\t\ttmpMask[i].bit(8 - 1 - j, true);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttmpMask[i].bit(8 - 1 - j, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.maskShort = maskShort;\n\t\tthis.mask = tmpMask;\n\n\t}\n\n\t/**\n\t * Sets this Address' IP value.\n\t * @param  {Byte4} ip\n\t */\n\tpublic setIp(ip: Byte4): void {\n\t\tthis.ip = ip;\n\t}\n\n\t/**\n\t * Returns this Address' mask.\n\t */\n\tpublic getMask(): Byte4 {\n\t\treturn this.mask;\n\t}\n\n\t/**\n\t * Returns the numerical representation of this Address' mask.\n\t */\n\tpublic getMaskShort(): number {\n\t\treturn this.maskShort;\n\t}\n\t\n\t/**\n\t * Returns this Address' IP value.\n\t */\n\tpublic getIp(): Byte4 {\n\t\treturn this.ip;\n\t}\n\n\t/**\n\t * Sets this Address IP/Mask values from a parsed string.\n\t * @param  {string} address The full address, in the X.X.X.X/X format. If requireMask is false, the mask can be ommited and defaults to /0.\n\t * @param  {boolean=true} requireMask Whether the address requires the mask to be given.\n\t */\n\tpublic parseAddress(address: string, requireMask: boolean = true): void {\n\n\t\taddress = address.trim();\n\t\tconst fullRegex = /^(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)\\/(\\d+)$/;\n\t\tconst ipRegex = /^(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)$/;\n\n\t\tlet match = fullRegex.exec(address);\n\n\t\tif (match !== null) {\n\t\t\tlet ipByte0 = new Byte(parseInt(match[1], 10));\n\t\t\tlet ipByte1 = new Byte(parseInt(match[2], 10));\n\t\t\tlet ipByte2 = new Byte(parseInt(match[3], 10));\n\t\t\tlet ipByte3 = new Byte(parseInt(match[4], 10));\n\t\t\tlet maskShort = parseInt(match[5], 10);\n\n\t\t\tif (maskShort < 0 || maskShort > 32) {\n\t\t\t\tlet err = new RangeError(\"The short mask should be between 0 and 32\");\n\t\t\t\terr.name = ERROR_MASK_RANGE;\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\tthis.setIp([ipByte0, ipByte1, ipByte2, ipByte3]);\n\t\t\tthis.setMaskShort(maskShort);\n\t\t}\n\t\telse if (!requireMask) {\n\n\t\t\tlet matchIp = ipRegex.exec(address);\n\n\t\t\tif (matchIp !== null) {\n\t\t\t\tlet ipByte0 = new Byte(parseInt(matchIp[1], 10));\n\t\t\t\tlet ipByte1 = new Byte(parseInt(matchIp[2], 10));\n\t\t\t\tlet ipByte2 = new Byte(parseInt(matchIp[3], 10));\n\t\t\t\tlet ipByte3 = new Byte(parseInt(matchIp[4], 10));\n\n\t\t\t\tthis.setIp([ipByte0, ipByte1, ipByte2, ipByte3]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet err = new Error(\"Invalid IP/mask address string\");\n\t\t\t\terr.name = ERROR_ADDRESS_PARSE;\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t}\n\t\telse {\n\t\t\tlet err = new Error(\"Invalid IP/mask address string\");\n\t\t\terr.name = ERROR_ADDRESS_PARSE;\n\t\t\tthrow err;\n\t\t}\n\n\t}\n\n\t\n\t/**\n\t * Returns the string representation of this Address in the X.X.X.X/X format.\n\t * @param  {boolean} omitMask Whether the mask should be ommited. Defaults to false.\n\t */\n\ttoString(omitMask: boolean = false): string {\n\n\t\treturn \"\" +\n\t\t\tthis.ip[0].getDecimal() + \".\" +\n\t\t\tthis.ip[1].getDecimal() + \".\" +\n\t\t\tthis.ip[2].getDecimal() + \".\" +\n\t\t\tthis.ip[3].getDecimal() + (omitMask? \"\" : this.shortMaskString());\n\n\t}\n\n\t/**\n\t * Returns the string representation of the mask.\n\t */\n\tmaskString(): string {\n\t\treturn \"\" +\n\t\t\tthis.mask[0].getDecimal() + \".\" +\n\t\t\tthis.mask[1].getDecimal() + \".\" +\n\t\t\tthis.mask[2].getDecimal() + \".\" +\n\t\t\tthis.mask[3].getDecimal();\n\t}\n\n\tshortMaskString(): string {\n\t\treturn \"/\" + this.getMaskShort();\n\t}\n\n}","import React, { FC } from \"react\";\n\ninterface ErrorBoxProps {\n\terrorMessage: string\n}\n\nconst ErrorBox: FC<ErrorBoxProps> = ({errorMessage}) => {\n\n    if (errorMessage) {\n        return (\n            <div className=\"errorbox\">{errorMessage}</div>\n        );\n    }\n\n    return null;\n\n}\n\nexport default ErrorBox;","import { Address } from \"../layer-3/address\";\n\n/**\n * Error name for when a root Domain has a label that isn't \".\" or undefined.\n */\nexport const ERROR_INVALID_ROOT_LABEL = \"InvalidRootLabelError\";\n\n/**\n * Error name for when a Domain has an invalid label.\n */\nexport const ERROR_INVALID_LABEL = \"InvalidLabelError\";\n\n/**\n * Error name for when a Domain's full name is greater than 253.\n */\nexport const ERROR_FULL_NAME_RANGE = \"FullNameRangeError\";\n\n/**\n * Error name for when a root Domain has an Address.\n */\nexport const ERROR_ROOT_ADDRESS = \"RootAddressError\";\n\n/**\n * Error name for when a domain with same label but different address is found during merge.\n */\nexport const ERROR_MERGE_OVERLAP = \"MergeOverlapError\";\n\n/**\n * Error name for when two merging domains have different labels.\n */\nexport const ERROR_MERGE_WRONG_ROOT = \"MergeWrongRootError\";\n\n/**\n * Error name for when trying to get the parts of an incomplete domain.\n */\nexport const ERROR_SMALL_DOMAIN = \"SmallDomainError\"\n\n/**\n * A DNS domain tree.\n * @author Henrique Colini\n */\nexport class Domain {\n\t\n\t/**\n\t * The parent Domain. Undefined if this is a root domain.\n\t */\n\tprivate parent: Domain = undefined;\n\n\t/**\n\t * This Domain's subdomains.\n\t */\n\tprivate subdomains: Domain[] = [];\n\n\t/**\n\t * The IP address this Domain refers to. Undefined if this is not a hostname.\n\t */\n\tprivate address: Address = undefined;\n\n\t/**\n\t * This Domain's text label.\n\t */\n\tprivate label: string;\n\t\n\t/**\n\t * Constructs a Domain, provided its label, parent and optionally an Address.\n\t * @param  {string} label The label of this Domain. Must follow naming conventions.\n\t * @param  {Domain} parent The parent of this Domain. If undefined, this is a root domain.\n\t * @param  {Address} address The address of this Domain, if it's a hostname. Optional. Defaults to undefined. Must not exist if this is a root domain.\n\t */\n\tconstructor(label: string, parent: Domain, address: Address = undefined) {\n\n\t\tthis.setParent(parent, false);\n\t\tthis.setAddress(address);\n\t\tthis.setLabel(label);\n\n\t\tif (this.getFullName().length > 253) {\n\t\t\t\n\t\t\tlet err = new RangeError(\"The full name of a domain must not exceed 253 characters\");\n\t\t\terr.name = ERROR_FULL_NAME_RANGE;\n\t\t\tthrow err;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Extracts a Domain from a string, in the format abc.def.ghi. Returns the last subdomain.\n\t * @param  {Domain} root The root domain to be used.\n\t * @param  {string} fullName The full name of the domain, in the format abc.def.ghi.\n\t */\n\tpublic static extractDomain(root: Domain, fullName: string): Domain {\n\n\t\tlet parts = fullName.trim().split(\".\");\n\n\t\tlet curr: Domain = root;\n\n\t\tfor (let i = parts.length - 1; i >= 0; i--) {\n\n\t\t\tif (parts[i].length === 0) {\n\t\t\t\tlet err = new Error();\n\t\t\t\terr.name = ERROR_INVALID_LABEL;\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\tlet next = new Domain(parts[i], curr);\n\t\t\tcurr.getSubdomains().push(next);\n\t\t\tcurr = next;\n\n\t\t}\n\n\t\treturn curr;\n\n\t}\n\t\n\t/**\n\t * Merges two domains (combines their subdomains) given the original two have the same label. It has options for what to do when domains with the same labels and different addresses are found:\n\t * \"ignore\" - Nothing happens. The original address is kept. \n\t * \"override\" - The new address replaces the old one, no matter what. \n\t * \"merge\" - The new address replaces the old one only if the new one exists. \n\t * \"error\" - Throws an error when this happens. \n\t * @param  {Domain} other The domain to be merged with this. \n\t * @param  {string} overrideAddresses What to do when domains with the same labels and different addresses are found. May be \"ignore\", \"override\", \"merge\" or \"error\".\n\t */\n\tpublic merge(other: Domain, overrideAddresses: \"ignore\" | \"override\" | \"merge\" | \"error\" = \"ignore\"): void {\n\t\t\n\t\tif (other.label !== this.label) {\n\t\t\tlet err = new Error(`Attempting to merge domains with different roots (\"${this.label}\" != \"${other.label}\")`);\n\t\t\terr.name = ERROR_MERGE_WRONG_ROOT;\n\t\t\tthrow err;\n\t\t}\n\n\t\tif (this.address !== other.address && ((this.address && !this.address.compare(other.address)) || !other.address.compare(this.address))) {\n\t\t\t\n\t\t\tif (overrideAddresses === \"override\") {\n\t\t\t\tthis.address = other.address;\n\t\t\t}\n\n\t\t\tif (overrideAddresses === \"merge\") {\n\t\t\t\tif (other.address) {\n\t\t\t\t\tthis.address = other.address;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (overrideAddresses === \"error\") {\n\t\t\t\tlet err = new Error(\"Overlapping Domain addresses\");\n\t\t\t\terr.name = ERROR_MERGE_OVERLAP;\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t}\n\n\t\tfor (let i = 0; i < other.subdomains.length; i++) {\n\t\t\tconst sub = other.subdomains[i];\n\t\t\tconst thisSub = this.getSubdomain(sub.label);\n\t\t\t\n\t\t\tif (thisSub) {\n\t\t\t\tthisSub.merge(sub, overrideAddresses);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.subdomains.push(sub);\n\t\t\t\tsub.setParent(this);\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the label of this Domain.\n\t * @param  {string} label The label to be set. Must follow naming conventions. If empty, the parent should be undefined.\n\t */\n\tpublic setLabel(label: string): void {\n\n\t\tlabel = label.toLowerCase();\n\n\t\tif ((label === '.' || label === undefined || label === \"\") && !this.parent) {\n\t\t\tthis.label = '';\n\t\t}\n\t\telse if (!this.parent) {\n\t\t\tlet err = new Error(\"The root domain's label must be either \\\".\\\", \\\"\\\" or undefined\");\n\t\t\terr.name = ERROR_INVALID_ROOT_LABEL;\n\t\t\tthrow err;\n\t\t}\n\t\telse if ((label === '.' || label === undefined || label === \"\") && this.parent) {\n\t\t\tlet err = new Error(\"The domain's label must not be \\\".\\\", \\\"\\\" or undefined\");\n\t\t\terr.name = ERROR_INVALID_LABEL;\n\t\t\tthrow err;\n\t\t}\n\t\telse {\n\n\t\t\tconst basicReg = /^[a-zA-Z]$/;\n\t\t\tconst reg = /^[a-zA-Z][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]$/;\n\n\t\t\tif (!basicReg.test(label) && !reg.test(label)) {\n\n\t\t\t\tlet err = new Error(\"Domain label doesn't follow the naming standards\");\n\t\t\t\terr.name = ERROR_INVALID_LABEL;\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\tthis.label = label;\n\t\t\t\n\t\t}\n\t}\n\t\n\t/**\n\t * Sets the parent of this Domain.\n\t * @param  {Domain} parent The parent domain to be set. If undefined, the address must also be undefined.\n\t * @param  {boolean} revalidateLabel Optional. Whether the label should also be revalidated. Defaults to true.\n\t * @param  {boolean} detach Optional. Whether this should be removed from the old parent's subdomains list. Defaults to false.\n\t */\n\tpublic setParent(parent: Domain, revalidateLabel: boolean = true, detach: boolean = false): void {\n\t\t\n\t\tif (this.address && !parent) {\n\t\t\tlet err = new Error(\"The root domain must not have an Address.\");\n\t\t\terr.name = ERROR_ROOT_ADDRESS;\n\t\t\tthrow err;\n\t\t}\n\t\t\n\t\tif (detach) {\n\t\t\tthis.parent.subdomains.splice(this.parent.subdomains.indexOf(this), 1);\n\t\t}\n\n\t\tthis.parent = parent;\n\n\t\tif (revalidateLabel) {\n\t\t\tthis.setLabel(this.label);\n\t\t}\n\n\t}\n\t\t\n\t/**\n\t * Sets the address of this Domain, making it a hostname.\n\t * @param  {Address} address The address to be set. If the parent is undefined, this must be undefined as well.\n\t */\n\tpublic setAddress(address: Address): void {\n\t\tif (address && !this.parent) {\n\t\t\tlet err = new Error(\"The root domain must not have an Address.\");\n\t\t\terr.name = ERROR_ROOT_ADDRESS;\n\t\t\tthrow err;\n\t\t}\n\t\tthis.address = address;\n\t}\n\n\t/**\n\t * Sets this Domain's subdomains.\n\t */\n\tpublic setSubdomains(subdomains: Domain[]) {\n\t\tthis.subdomains = subdomains;\n\t}\n\n\t/**\n\t * Returns this Domain's label.\n\t */\n\tpublic getLabel(): string {\n\t\treturn this.label;\n\t}\n\n\t/**\n\t * Returns this Domain's parent domain.\n\t */\n\tpublic getParent(): Domain {\n\t\treturn this.parent;\n\t}\n\n\t/**\n\t * Returns this Domain's address if this is a hostname.\n\t */\n\tpublic getAddress(): Address {\n\t\treturn this.address;\n\t}\n\t\n\t/**\n\t * Returns this Domain's subdomains.\n\t */\n\tpublic getSubdomains(): Domain[] {\n\t\treturn this.subdomains;\n\t}\n\t\n\t/**\n\t * Returns a subdomain, given its label. If not found, returns undefined.\n\t * @param  {string} label The label of the Domain to be searched.\n\t */\n\tpublic getSubdomain(label: string): Domain {\n\t\t\n\t\tfor (let i = 0; i < this.subdomains.length; i++) {\n\t\t\tconst sub = this.subdomains[i];\n\t\t\tif (sub.label === label) {\n\t\t\t\treturn sub;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\t/**\n\t * Returns a string representation of this Domain. Similar to getLabel(), except it returns \".\" if this is a root domain.\n\t */\n\tpublic toString(): string {\n\t\tif (!this.parent) {\n\t\t\treturn \".\";\n\t\t}\n\t\treturn this.getLabel();\n\t}\n\n\t/**\n\t * Returns the full name of this Domain, recursively adding parents.\n\t */\n\tpublic getFullName(): string {\n\t\tif (!this.parent) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (!this.parent.parent) {\n\t\t\treturn this.label;\n\t\t}\n\t\treturn this.label + \".\" + this.parent.getFullName();\n\t}\n\t\n\t/**\n\t * Returns the parts of a complete domain (such as the full domain, top-level domain etc), as strings. Adds \"www\" if missing.\n\t */\n\tpublic getDomainParts(): { full: string, tld: string, dest: string, inter: string, admin: string } {\n\n\t\tlet domainParts = this.getFullName().split(\".\");\n\n\t\tif (domainParts.length < 2) {\n\t\t\tlet error = Error();\n\t\t\terror.name = ERROR_SMALL_DOMAIN;\n\t\t\tthrow error;\n\t\t}\n\n\t\tlet fullStr = \"\";\n\t\tlet tldStr = domainParts[domainParts.length - 1];\n\t\tlet destStr = domainParts[0];\n\t\tlet interStr = \"\";\n\t\tlet adminStr = \"\";\n\n\t\tif (domainParts.length === 2 || destStr !== \"www\") {\n\t\t\tdomainParts.unshift(\"www\");\n\t\t\tdestStr = \"www\";\n\t\t}\n\t\t\n\t\tif (domainParts.length > 3) {\n\t\t\tlet middle = \"\";\n\t\t\tfor (let i = 2; i < domainParts.length - 1; i++) middle += domainParts[i] + ((i < domainParts.length - 2) ? \".\" : \"\");\n\t\t\tdomainParts = [domainParts[0], domainParts[1], middle, domainParts[domainParts.length - 1]];\n\t\t\tinterStr = middle;\n\t\t}\n\n\t\tfor (let i = 0; i < domainParts.length; i++) fullStr += domainParts[i] + ((i < domainParts.length - 1) ? \".\" : \"\");\n\t\tadminStr = domainParts[1];\n\n\t\treturn { full: fullStr, tld: tldStr, dest: destStr, inter: interStr, admin: adminStr };\n\n\t}\n\n\t/**\n\t * Returns a neatly formatted string showing the whole tree. Raw method.\n\t * @param  {boolean} first Whether this is the root of the tree.\n\t * @param  {string} prefix The prefix of this line of the tree.\n\t * @param  {boolean} isTail Whether this line is the tail of the tree.\n\t */\n\tprivate getTreeStrRaw(first: boolean, prefix: string, isTail: boolean): string {\n\n\t\tlet str = (first ? \"\" : (prefix + (isTail ? \"└── \" : \"├── \"))) + this.toString() + (this.address ? ` <${this.address.toString(true)}>` : \"\") + \"\\n\";\n\t\n\t\tfor (let i = 0; i < this.subdomains.length - 1; i++) {\n\t\t\tstr += this.subdomains[i].getTreeStrRaw(false, (first ? \"\" : (prefix + (isTail ? \"    \" : \"│   \"))), false);\n\t\t}\n\n\t\tif (this.subdomains.length > 0) {\n\t\t\tstr += this.subdomains[this.subdomains.length - 1].getTreeStrRaw(false, (first ? \"\" : (prefix + (isTail ? \"    \" : \"│   \"))), true);\n\t\t}\n\n\t\treturn str;\n\n\t}\n\n\t/**\n\t * Returns a neatly formatted string showing the whole tree.\n\t */\n\tpublic getTreeStr(): string {\n\t\treturn this.getTreeStrRaw(true, \"\", true);\n\t}\n\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAqCAYAAAA9IzKsAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAAB8SURBVFhH7c5rCoAgEEVh9+j+12JBXLhJjzHUCk7w/XKmOSnnXGZZv3SECNlF1I8tIv85myFCpkY4nydCQsu9ZpzPEyFDIloRIaEDI/hdIoQIIUKIECLknxE+f6Xeq/ksERKKiMzU7nb8nQh5dKAHv0uEECHfi3gLEZtcFtY4F1SpeUPvAAAAAElFTkSuQmCC\"","// DNSTree\n// +=========================+\n// Author: Henrique Colini\n// Version: 2.0 (2019-08-28)\n\nimport React, { Component, RefObject } from \"react\";\nimport \"src/sass/pages/dnstree.scss\";\nimport failImage from \"../../../../images/layers/5/unreachable.png\";\nimport { Address, ERROR_ADDRESS_PARSE } from \"../../../wireworks/networking/layers/layer-3/address\";\nimport { Domain, ERROR_INVALID_LABEL, ERROR_FULL_NAME_RANGE } from \"../../../wireworks/networking/layers/layer-5/domain\";\nimport { ERROR_BYTE_RANGE } from \"../../../wireworks/networking/byte\";\nimport ErrorBox from \"../../../components/ErrorBox\";\n\n/**\n * An alias that represents a fake website. Used only for DNSTree.\n */\ntype Site = {\n\tname: string,\n\taddress: Address,\n\tstyle: string\n};\n\n// +==============================================+\n\nclass DnsTree extends Component {\n\n\tprivate txtSiteTitle: RefObject<HTMLInputElement>;\n\tprivate txtSiteAddress: RefObject<HTMLInputElement>;\n\tprivate txtDomainName: RefObject<HTMLInputElement>;\n\tprivate txtDomainAddress: RefObject<HTMLInputElement>;\n\tprivate sites: Site[] = [];\n\n\tstate = {\n\t\tsiteErrorMessage: null as string,\n\t\tdomainErrorMessage: null as string,\n\t\tsites: undefined as Site[],\n\t\trootDomain: new Domain(\".\", undefined)\n\t};\n\n\t/**\n\t * Creates a fake website from user input.\n\t */\n\tpublic createSite = () => {\n\n\t\tlet errStr: string = undefined;\n\n\t\ttry {\n\n\t\t\tlet name = this.txtSiteTitle.current.value.trim();\n\n\t\t\tif (name === \"\") {\n\t\t\t\terrStr = \"Insira o nome do site.\";\n\t\t\t\tthrow Error();\n\t\t\t}\n\n\t\t\tlet address = new Address(this.txtSiteAddress.current.value);\n\n\t\t\tfor (let i = 0; i < this.sites.length; i++) {\n\t\t\t\tif (this.sites[i].address.compare(address)) {\n\t\t\t\t\terrStr = \"Já existe um site com esse endereço.\";\n\t\t\t\t\tthrow Error();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tlet site = {\n\t\t\t\tname: name,\n\t\t\t\taddress: address,\n\t\t\t\tstyle: \"style-\" + Math.floor(Math.random() * 6)\n\t\t\t};\n\n\t\t\tthis.sites.push(site);\n\t\t\tthis.setState({sites: this.sites, siteErrorMessage: null});\n\n\t\t} catch (error) {\n\n\t\t\tif (!errStr) {\n\n\t\t\t\tswitch (error.name) {\n\t\t\t\t\tcase ERROR_ADDRESS_PARSE:\n\t\t\t\t\t\terrStr = \"O endereço deve possuir o formato 0.0.0.0.\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ERROR_BYTE_RANGE:\n\t\t\t\t\t\terrStr = \"Um ou mais octetos do endereço possui um valor alto demais (deve estar entre 0-255).\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\terrStr = \"Erro desconhecido (\" + error.name + \").\"\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.setState({siteErrorMessage: \"Entrada Inválida. \" + errStr});\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Removes a site from a fake \"internet\".\n\t */\n\tpublic removeSite = (site: Site) => {\n\t\tthis.sites.splice(this.sites.indexOf(site), 1);\n\t\tthis.setState({sites: this.sites});\n\t}\n\n\t/**\n\t * Registers a domain, from user input.\n\t */\n\tpublic registerDomain = () => {\n\n\t\tlet errStr: string = undefined;\n\n\t\ttry {\n\n\t\t\tlet tmpRoot = new Domain(\".\", undefined);\n\n\t\t\tlet fullName = this.txtDomainName.current.value;\n\n\t\t\tif (fullName === \"localhost\") {\n\t\t\t\terrStr = \"Você não pode usar esse nome.\";\n\t\t\t\tthrow Error();\n\t\t\t} else {\n\t\t\t\tlet domain = Domain.extractDomain(tmpRoot, fullName);\n\t\t\t\tlet addressStr = this.txtDomainAddress.current.value.trim();\n\n\t\t\t\tif (addressStr !== \"\") {\n\t\t\t\t\tlet address = new Address(addressStr);\n\t\t\t\t\tdomain.setAddress(address);\n\t\t\t\t} else {\n\t\t\t\t\tdomain.setAddress(undefined);\n\t\t\t\t}\n\n\t\t\t\tthis.state.rootDomain.merge(tmpRoot, \"merge\");\n\n\t\t\t\tthis.setState({rootDomain: this.state.rootDomain, domainErrorMessage: null});\n\n\t\t\t}\n\n\t\t} catch (error) {\n\n\t\t\tif (!errStr) {\n\n\t\t\t\tswitch (error.name) {\n\t\t\t\t\tcase ERROR_ADDRESS_PARSE:\n\t\t\t\t\t\terrStr = \"O endereço deve possuir o formato 0.0.0.0.\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ERROR_BYTE_RANGE:\n\t\t\t\t\t\terrStr = \"Um ou mais octetos do endereço possui um valor alto demais (deve estar entre 0-255).\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ERROR_INVALID_LABEL:\n\t\t\t\t\t\terrStr = \"Esse domínio possui um nome inválido.\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ERROR_FULL_NAME_RANGE:\n\t\t\t\t\t\terrStr = \"Esse domínio possui um nome grande demais.\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\terrStr = \"Erro desconhecido (\" + error.name + \").\"\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.setState({domainErrorMessage: \"Entrada inválida. \" + errStr})\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Removes a domain from the known domains list.\n\t */\n\tpublic removeDomain = (domain: Domain) => {\n\t\tif (domain.getSubdomains().length === 0 || window.confirm(\"Tem certeza de quer remover esse domínio?\\nTodos os seus subdomínios também serão removidos.\")) {\n\t\t\tdomain.setAddress(undefined);\n\t\t\tdomain.setParent(undefined, false, true);\n\t\t\tthis.setState({rootDomain: this.state.rootDomain});\n\t\t}\n\t}\n\n\t/**\n\t * Unbinds the IP address from a domain.\n\t */\n\tpublic removeDomainAddress = (domain: Domain) => {\n\t\tdomain.setAddress(undefined);\n\t\tthis.setState({rootDomain: this.state.rootDomain});\n\t}\n\t\n\tconstructor(props: any) {\n\t\tsuper(props);\n\t\tthis.state.sites = this.sites;\n\t\tthis.txtSiteTitle = React.createRef();\n\t\tthis.txtSiteAddress = React.createRef();\n\t\tthis.txtDomainName = React.createRef();\n\t\tthis.txtDomainAddress = React.createRef();\n\t}\n\n    render () {\n        return (\n\t\t\t<main>\n\n\t\t\t\t<FakeBrowser sites={this.state.sites} rootDomain={this.state.rootDomain}/>\n\t\t\t\t\n\t\t\t\t<h1 className=\"text-light\">Criação de Websites</h1>\n\n\t\t\t\t<div className=\"hbox align-end mb-3\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label htmlFor=\"site_title\">Título</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input type=\"text\" id=\"site_title\" ref={this.txtSiteTitle} onKeyDown={ (ev) => { if(ev.key === \"Enter\") this.createSite() }} placeholder=\"Nome do Website\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label htmlFor=\"site_address\">Endereço</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input type=\"text\" id=\"site_address\" ref={this.txtSiteAddress} onKeyDown={ (ev) => { if(ev.key === \"Enter\") this.createSite() }} placeholder=\"0.0.0.0\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type=\"button\" onClick={this.createSite}>Criar</button>\n\t\t\t\t</div>\n\n\t\t\t\t<ErrorBox errorMessage={this.state.siteErrorMessage}/>\n\n\t\t\t\t<SiteList sites={this.state.sites} removeSite={this.removeSite}/>\t\t\t\t\n\n\t\t\t\t<h1 className=\"text-light\">Registro de Domínios</h1>\n\n\t\t\t\t<div className=\"hbox align-end mb-3\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label htmlFor=\"domain_name\">Domínio</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input type=\"text\" id=\"domain_name\" ref={this.txtDomainName} onKeyDown={ (ev) => { if(ev.key === \"Enter\") this.registerDomain() }} placeholder=\"www.exemplo.com.br\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label htmlFor=\"domain_address\">Endereço</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input type=\"text\" id=\"domain_address\" ref={this.txtDomainAddress} onKeyDown={ (ev) => { if(ev.key === \"Enter\") this.registerDomain() }} placeholder=\"0.0.0.0\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type=\"button\" onClick={this.registerDomain}>Registrar</button>\n\t\t\t\t</div>\n\n\t\t\t\t<ErrorBox errorMessage={this.state.domainErrorMessage}/>\n\n\t\t\t\t<DomainTree rootDomain={this.state.rootDomain} removeDomain={this.removeDomain} removeDomainAddress={this.removeDomainAddress}/>\n\n\t\t\t</main>\n        );\n    }\n}\n\nexport default DnsTree;\n\ninterface FakeBrowserProps {\n\tsites: Site[],\n\trootDomain: Domain\n}\n\n/**\n * A component that represents a fake internet browser.\n */\nclass FakeBrowser extends Component<FakeBrowserProps> {\n\n\t/**\n\t * The reference to the browser's address bar.\n\t */\n\tprivate addressBar: RefObject<HTMLInputElement>;\n\n\tstate = {\n\t\tpageStatus: undefined as undefined | \"loaded\" | \"failed\",\n\t\taddressError: false,\n\t\tpageStyle: \"\",\n\t\tpageTitle: \"\",\n\t\tfailMessage: null,\n\t\tloading: false\n\t};\n\n\t/**\n\t * Refreshes the browser.\n\t */\n\tprivate refreshBrowser = () => {\n\n\t\ttry {\n\n\t\t\tlet foundAddress: Address = undefined;\n\t\t\tlet domain: Domain = undefined;\n\t\t\tlet alreadyLoaded: boolean = false;\n\t\t\n\t\t\tthis.setState({\n\t\t\t\tloading: true,\n\t\t\t\taddressError: false,\n\t\t\t\tpageStatus: undefined\n\t\t\t});\n\t\n\t\t\ttry {\n\t\n\t\t\t\tlet str = this.addressBar.current.value;\n\t\n\t\t\t\tif (str === \"localhost\") {\n\t\t\t\t\talreadyLoaded = true;\n\t\t\t\t\tsetTimeout(() => {\n\t\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\tpageStatus: \"failed\",\n\t\t\t\t\t\t\tfailMessage: <><span className=\"font-bold\">localhost</span> demorou muito para responder.</>\n\t\t\t\t\t\t});\n\n\t\n\t\t\t\t\t}, 2000);\n\t\t\t\t} else {\n\t\t\t\t\tfoundAddress = new Address(str);\n\t\t\t\t}\n\t\n\t\t\t} catch (error) {\n\t\n\t\t\t\tlet tmpRoot = new Domain(\".\", undefined);\n\t\t\t\tdomain = Domain.extractDomain(tmpRoot, this.addressBar.current.value);\n\t\n\t\t\t\tlet tmpCurr: Domain = tmpRoot;\n\t\t\t\tlet curr: Domain = this.props.rootDomain;\n\t\n\t\t\t\tlet exit = false;\n\t\n\t\t\t\twhile (!exit) {\n\t\t\t\t\t\n\t\t\t\t\ttmpCurr = tmpCurr.getSubdomains()[0];\n\t\t\t\t\tcurr = curr.getSubdomain(tmpCurr.getLabel());\n\t\n\t\t\t\t\tif (!curr || curr.getFullName() === domain.getFullName()) {\n\t\t\t\t\t\texit = true;\n\t\t\t\t\t}\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif (curr) {\n\t\t\t\t\tfoundAddress = curr.getAddress();\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tif (!alreadyLoaded) {\n\t\t\t\t\n\t\t\t\tif (foundAddress) {\n\t\n\t\t\t\t\tlet exists = false;\n\t\t\t\t\tlet site: Site = undefined;\n\t\n\t\t\t\t\tfor (let i = 0; !exists && i < this.props.sites.length; i++) {\n\t\t\t\t\t\tsite = this.props.sites[i];\n\t\t\t\t\t\tif (site.address.compare(foundAddress)) {\n\t\t\t\t\t\t\texists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (exists) {\n\t\n\t\t\t\t\t\tsetTimeout(() => {\n\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\t\tpageStatus: \"loaded\",\n\t\t\t\t\t\t\t\tpageStyle: site.style,\n\t\t\t\t\t\t\t\tpageTitle: site.name\n\t\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\t}, 500);\n\t\n\t\t\t\t\t} else {\n\t\n\t\t\t\t\t\tsetTimeout(() => {\n\n\t\t\t\t\t\t\tlet displayName = domain ? domain.getFullName() : foundAddress.toString(true);\n\t\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\t\tpageStatus: \"failed\",\n\t\t\t\t\t\t\t\tfailMessage: <><span className=\"font-bold\">{displayName}</span> demorou muito para responder.</>\n\t\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\t}, 2000);\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tsetTimeout(() => {\n\t\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\tpageStatus: \"failed\",\n\t\t\t\t\t\t\tfailMessage: <>Não foi possível encontrar o endereço IP do servidor de <span className=\"font-bold\">{domain.getFullName()}</span>.</>\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t}, 1000);\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t} catch (error) {\n\t\t\n\t\t\tthis.setState({\n\t\t\t\tloading: false,\n\t\t\t\taddressError: true\n\t\t\t});\n\t\n\t\t}\n\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.addressBar = React.createRef();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={\"browser \" + (this.state.loading ? \"loading\" : \"\") }>\n\t\t\t\t<div className=\"top-bar\">\n\t\t\t\t\t<div className=\"previous disabled\"><i className=\"fas fa-arrow-left fa-lg\"></i></div>\n\t\t\t\t\t<div className=\"next disabled\"><i className=\"fas fa-arrow-right fa-lg\"></i></div>\n\t\t\t\t\t<div className=\"reload\" onClick={this.refreshBrowser}><i className=\"fas fa-redo-alt fa-lg\"></i></div>\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"address_bar\"\n\t\t\t\t\t\tref={this.addressBar}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"address-bar \" +\n\t\t\t\t\t\t\t(this.state.loading ? \"loading\" : \"\") +\n\t\t\t\t\t\t\t(this.state.addressError ? \"address-error\" : \"\")\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonKeyDown= { (ev) => {if (ev.key === \"Enter\") this.refreshBrowser() } }/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"browser-content\">\n\t\t\t\t\t\n\t\t\t\t\t{ \n\t\t\t\t\t\tthis.state.pageStatus === \"loaded\" && \n\t\t\t\t\t\t<div className=\"page\">\n\t\t\t\t\t\t\t<h1 className={this.state.pageStyle}>{this.state.pageTitle}</h1>\n\t\t\t\t\t\t\t<div className=\"separator\"></div>\n\t\t\t\t\t\t\t<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quae expedita dolorem eligendi perferendis voluptatem doloribus illo labore culpa.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.pageStatus === \"failed\" &&\n\t\t\t\t\t\t<div className=\"page\">\n\t\t\t\t\t\t\t<img src={failImage} alt=\"\"/>\n\t\t\t\t\t\t\t<h2 className=\"font-bold\">Não é possível acessar esse site</h2>\n\t\t\t\t\t\t\t<h3 className=\"text-light\">{this.state.failMessage}</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\ninterface SiteListProps {\n\tsites: Site[],\n\tremoveSite: (site: Site) => void\n}\n\n/**\n * A component that represents a list of all sites.\n */\nclass SiteList extends Component<SiteListProps> {\n\n\trender() {\n\t\t\n\t\tlet siteComponents = [];\n\n\t\tfor (let i = 0; i < this.props.sites.length; i++) {\n\t\t\t\n\t\t\tsiteComponents[i] = <li>\n\t\t\t\t<div className=\"spacer\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"font-medium font-bold site-name\">{this.props.sites[i].name}</span>\n\t\t\t\t\t\t<span className=\"font-medium font-light\">{this.props.sites[i].address.toString(true)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<i className=\"fas fa-trash fa-lg site-delete\" onClick={() => { this.props.removeSite(this.props.sites[i]) }}/>\n\t\t\t\t</div>\n\t\t\t</li>\n\n\t\t}\n\n\t\treturn <ul className=\"collection\">{ siteComponents }</ul>;\n\t}\n\n}\n\ninterface DomainTreeProps {\n\trootDomain: Domain,\n\tremoveDomain: (domain: Domain) => void,\n\tremoveDomainAddress: (domain: Domain) => void\n}\n\n/**\n * A component that shows the entire DNS tree.\n */\nclass DomainTree extends Component<DomainTreeProps> {\n\n\t/**\n\t * Returns a single branch of the tree.\n\t */\n\tprivate renderBranch = (domain: Domain) => {\n\n\t\tlet address = domain.getAddress();\n\t\tlet subdomains = [];\n\n\t\tfor (let i = 0; i < domain.getSubdomains().length; i++) {\n\t\t\tsubdomains[i] = <li>\n\t\t\t\t{this.renderBranch(domain.getSubdomains()[i])}\n\t\t\t</li>\n\t\t}\n\n\t\treturn <>\n\t\t\t<div className=\"domain\">\n\t\t\t\t<span className=\"label\">{domain.toString()}</span>\n\t\t\t\t{ (address && true) && <span className=\"address\">{address.toString(true)}</span>}\n\t\t\t\t{ (domain.getParent() && true) && <i className=\"fas fa-trash fa-lg domain-delete\" onClick={() => {this.props.removeDomain(domain)}}/>}\n\t\t\t\t{ (address && true) && <i className=\"fas fa-trash fa-lg domain-address-delete\" onClick={() => {this.props.removeDomainAddress(domain)}}/>}\n\t\t\t</div>\n\t\t\t<ul>\n\t\t\t\t{subdomains}\n\t\t\t</ul>\n\t\t</>\n\t}\n\n\trender() {\n\t\tif (this.props.rootDomain.getSubdomains().length === 0) return null;\n\t\treturn <div className=\"domain-tree\" id=\"root_tree\">{this.renderBranch(this.props.rootDomain)}</div>;\n\t}\n\n}"],"sourceRoot":""}